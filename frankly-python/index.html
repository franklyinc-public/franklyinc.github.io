<!doctype html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1" />

    <title>frankly API documentation</title>
    <meta name="description" content="The module provides types and functions for interacting with the **Frankly API**.

Goal
====

Frankl..." />

  <link href='http://fonts.googleapis.com/css?family=Source+Sans+Pro:400,300' rel='stylesheet' type='text/css'>
  
  <style type="text/css">
  
* {
  box-sizing: border-box;
}
/*! normalize.css v1.1.1 | MIT License | git.io/normalize */

/* ==========================================================================
   HTML5 display definitions
   ========================================================================== */

/**
 * Correct `block` display not defined in IE 6/7/8/9 and Firefox 3.
 */

article,
aside,
details,
figcaption,
figure,
footer,
header,
hgroup,
main,
nav,
section,
summary {
    display: block;
}

/**
 * Correct `inline-block` display not defined in IE 6/7/8/9 and Firefox 3.
 */

audio,
canvas,
video {
    display: inline-block;
    *display: inline;
    *zoom: 1;
}

/**
 * Prevent modern browsers from displaying `audio` without controls.
 * Remove excess height in iOS 5 devices.
 */

audio:not([controls]) {
    display: none;
    height: 0;
}

/**
 * Address styling not present in IE 7/8/9, Firefox 3, and Safari 4.
 * Known issue: no IE 6 support.
 */

[hidden] {
    display: none;
}

/* ==========================================================================
   Base
   ========================================================================== */

/**
 * 1. Prevent system color scheme's background color being used in Firefox, IE,
 *    and Opera.
 * 2. Prevent system color scheme's text color being used in Firefox, IE, and
 *    Opera.
 * 3. Correct text resizing oddly in IE 6/7 when body `font-size` is set using
 *    `em` units.
 * 4. Prevent iOS text size adjust after orientation change, without disabling
 *    user zoom.
 */

html {
    background: #fff; /* 1 */
    color: #000; /* 2 */
    font-size: 100%; /* 3 */
    -webkit-text-size-adjust: 100%; /* 4 */
    -ms-text-size-adjust: 100%; /* 4 */
}

/**
 * Address `font-family` inconsistency between `textarea` and other form
 * elements.
 */

html,
button,
input,
select,
textarea {
    font-family: sans-serif;
}

/**
 * Address margins handled incorrectly in IE 6/7.
 */

body {
    margin: 0;
}

/* ==========================================================================
   Links
   ========================================================================== */

/**
 * Address `outline` inconsistency between Chrome and other browsers.
 */

a:focus {
    outline: thin dotted;
}

/**
 * Improve readability when focused and also mouse hovered in all browsers.
 */

a:active,
a:hover {
    outline: 0;
}

/* ==========================================================================
   Typography
   ========================================================================== */

/**
 * Address font sizes and margins set differently in IE 6/7.
 * Address font sizes within `section` and `article` in Firefox 4+, Safari 5,
 * and Chrome.
 */

h1 {
    font-size: 2em;
    margin: 0.67em 0;
}

h2 {
    font-size: 1.5em;
    margin: 0.83em 0;
}

h3 {
    font-size: 1.17em;
    margin: 1em 0;
}

h4 {
    font-size: 1em;
    margin: 1.33em 0;
}

h5 {
    font-size: 0.83em;
    margin: 1.67em 0;
}

h6 {
    font-size: 0.67em;
    margin: 2.33em 0;
}

/**
 * Address styling not present in IE 7/8/9, Safari 5, and Chrome.
 */

abbr[title] {
    border-bottom: 1px dotted;
}

/**
 * Address style set to `bolder` in Firefox 3+, Safari 4/5, and Chrome.
 */

b,
strong {
    font-weight: bold;
}

blockquote {
    margin: 1em 40px;
}

/**
 * Address styling not present in Safari 5 and Chrome.
 */

dfn {
    font-style: italic;
}

/**
 * Address differences between Firefox and other browsers.
 * Known issue: no IE 6/7 normalization.
 */

hr {
    -moz-box-sizing: content-box;
    box-sizing: content-box;
    height: 0;
}

/**
 * Address styling not present in IE 6/7/8/9.
 */

mark {
    background: #ff0;
    color: #000;
}

/**
 * Address margins set differently in IE 6/7.
 */

p,
pre {
    margin: 1em 0;
}

/**
 * Correct font family set oddly in IE 6, Safari 4/5, and Chrome.
 */

code,
kbd,
pre,
samp {
    font-family: monospace, serif;
    _font-family: 'courier new', monospace;
    font-size: 1em;
}

/**
 * Improve readability of pre-formatted text in all browsers.
 */

pre {
    white-space: pre;
    white-space: pre-wrap;
    word-wrap: break-word;
}

/**
 * Address CSS quotes not supported in IE 6/7.
 */

q {
    quotes: none;
}

/**
 * Address `quotes` property not supported in Safari 4.
 */

q:before,
q:after {
    content: '';
    content: none;
}

/**
 * Address inconsistent and variable font size in all browsers.
 */

small {
    font-size: 80%;
}

/**
 * Prevent `sub` and `sup` affecting `line-height` in all browsers.
 */

sub,
sup {
    font-size: 75%;
    line-height: 0;
    position: relative;
    vertical-align: baseline;
}

sup {
    top: -0.5em;
}

sub {
    bottom: -0.25em;
}

/* ==========================================================================
   Lists
   ========================================================================== */

/**
 * Address margins set differently in IE 6/7.
 */

dl,
menu,
ol,
ul {
    margin: 1em 0;
}

dd {
    margin: 0 0 0 40px;
}

/**
 * Address paddings set differently in IE 6/7.
 */

menu,
ol,
ul {
    padding: 0 0 0 40px;
}

/**
 * Correct list images handled incorrectly in IE 7.
 */

nav ul,
nav ol {
    list-style: none;
    list-style-image: none;
}

/* ==========================================================================
   Embedded content
   ========================================================================== */

/**
 * 1. Remove border when inside `a` element in IE 6/7/8/9 and Firefox 3.
 * 2. Improve image quality when scaled in IE 7.
 */

img {
    border: 0; /* 1 */
    -ms-interpolation-mode: bicubic; /* 2 */
}

/**
 * Correct overflow displayed oddly in IE 9.
 */

svg:not(:root) {
    overflow: hidden;
}

/* ==========================================================================
   Figures
   ========================================================================== */

/**
 * Address margin not present in IE 6/7/8/9, Safari 5, and Opera 11.
 */

figure {
    margin: 0;
}

/* ==========================================================================
   Forms
   ========================================================================== */

/**
 * Correct margin displayed oddly in IE 6/7.
 */

form {
    margin: 0;
}

/**
 * Define consistent border, margin, and padding.
 */

fieldset {
    border: 1px solid #c0c0c0;
    margin: 0 2px;
    padding: 0.35em 0.625em 0.75em;
}

/**
 * 1. Correct color not being inherited in IE 6/7/8/9.
 * 2. Correct text not wrapping in Firefox 3.
 * 3. Correct alignment displayed oddly in IE 6/7.
 */

legend {
    border: 0; /* 1 */
    padding: 0;
    white-space: normal; /* 2 */
    *margin-left: -7px; /* 3 */
}

/**
 * 1. Correct font size not being inherited in all browsers.
 * 2. Address margins set differently in IE 6/7, Firefox 3+, Safari 5,
 *    and Chrome.
 * 3. Improve appearance and consistency in all browsers.
 */

button,
input,
select,
textarea {
    font-size: 100%; /* 1 */
    margin: 0; /* 2 */
    vertical-align: baseline; /* 3 */
    *vertical-align: middle; /* 3 */
}

/**
 * Address Firefox 3+ setting `line-height` on `input` using `!important` in
 * the UA stylesheet.
 */

button,
input {
    line-height: normal;
}

/**
 * Address inconsistent `text-transform` inheritance for `button` and `select`.
 * All other form control elements do not inherit `text-transform` values.
 * Correct `button` style inheritance in Chrome, Safari 5+, and IE 6+.
 * Correct `select` style inheritance in Firefox 4+ and Opera.
 */

button,
select {
    text-transform: none;
}

/**
 * 1. Avoid the WebKit bug in Android 4.0.* where (2) destroys native `audio`
 *    and `video` controls.
 * 2. Correct inability to style clickable `input` types in iOS.
 * 3. Improve usability and consistency of cursor style between image-type
 *    `input` and others.
 * 4. Remove inner spacing in IE 7 without affecting normal text inputs.
 *    Known issue: inner spacing remains in IE 6.
 */

button,
html input[type="button"], /* 1 */
input[type="reset"],
input[type="submit"] {
    -webkit-appearance: button; /* 2 */
    cursor: pointer; /* 3 */
    *overflow: visible;  /* 4 */
}

/**
 * Re-set default cursor for disabled elements.
 */

button[disabled],
html input[disabled] {
    cursor: default;
}

/**
 * 1. Address box sizing set to content-box in IE 8/9.
 * 2. Remove excess padding in IE 8/9.
 * 3. Remove excess padding in IE 7.
 *    Known issue: excess padding remains in IE 6.
 */

input[type="checkbox"],
input[type="radio"] {
    box-sizing: border-box; /* 1 */
    padding: 0; /* 2 */
    *height: 13px; /* 3 */
    *width: 13px; /* 3 */
}

/**
 * 1. Address `appearance` set to `searchfield` in Safari 5 and Chrome.
 * 2. Address `box-sizing` set to `border-box` in Safari 5 and Chrome
 *    (include `-moz` to future-proof).
 */

input[type="search"] {
    -webkit-appearance: textfield; /* 1 */
    -moz-box-sizing: content-box;
    -webkit-box-sizing: content-box; /* 2 */
    box-sizing: content-box;
}

/**
 * Remove inner padding and search cancel button in Safari 5 and Chrome
 * on OS X.
 */

input[type="search"]::-webkit-search-cancel-button,
input[type="search"]::-webkit-search-decoration {
    -webkit-appearance: none;
}

/**
 * Remove inner padding and border in Firefox 3+.
 */

button::-moz-focus-inner,
input::-moz-focus-inner {
    border: 0;
    padding: 0;
}

/**
 * 1. Remove default vertical scrollbar in IE 6/7/8/9.
 * 2. Improve readability and alignment in all browsers.
 */

textarea {
    overflow: auto; /* 1 */
    vertical-align: top; /* 2 */
}

/* ==========================================================================
   Tables
   ========================================================================== */

/**
 * Remove most spacing between table cells.
 */

table {
    border-collapse: collapse;
    border-spacing: 0;
}

  </style>

  <style type="text/css">
  
  html, body {
    margin: 0;
    padding: 0;
    height: 100%;
  }
  body {
    background: #fff;
    font-family: "Source Sans Pro", "Helvetica Neueue", Helvetica, sans;
    font-weight: 300;
    font-size: 16px;
    line-height: 1.6em;
  }
  #content {
    width: 80%;
    max-width: 900px;
    float: left;
    padding: 30px 60px;
    border-left: 1px solid #ddd;
  }
  #sidebar {
    width: 15%;
    min-width: 400px;
    float: left;
    padding: 30px;
    overflow: hidden;
  }
  #nav {
    font-size: 130%;
    margin: 0 0 15px 0;
  }

  #top {
    display: block;
    position: fixed;
    bottom: 5px;
    left: 5px;
    font-size: .85em;
    text-transform: uppercase;
  }

  #footer {
    font-size: .75em;
    padding: 5px 30px;
    border-top: 1px solid #ddd;
    text-align: right;
  }
    #footer p {
      margin: 0 0 0 30px;
      display: inline-block;
    }

  h1, h2, h3, h4, h5 {
    font-weight: 300;
  }
  h1 {
    font-size: 2.5em;
    line-height: 1.1em;
    margin: 0 0 .50em 0;
  }

  h2 {
    font-size: 1.75em;
    margin: 1em 0 .50em 0;
  }

  h3 {
    margin: 25px 0 10px 0;
  }

  h4 {
    margin: 0;
    font-size: 105%;
  }

  a {
    color: #058;
    text-decoration: none;
    transition: color .3s ease-in-out;
  }

  a:hover {
    color: #e08524;
    transition: color .3s ease-in-out;
  }

  pre, code, .mono, .name {
    font-family: "Ubuntu Mono", "Cousine", "DejaVu Sans Mono", monospace;
  }

  .title .name {
    font-weight: bold;
  }
  .section-title {
    margin-top: 2em;
  }
  .ident {
    color: #900;
  }

  code {
    background: #f9f9f9;
  } 

  pre {
    background: #fefefe;
    border: 1px solid #ddd;
    box-shadow: 2px 2px 0 #f3f3f3;
    margin: 0 30px;
    padding: 15px 30px;
  }

  .codehilite {
    margin: 0 60px 10px 30px;
  }

    .codehilite pre {
      margin: 0;
    }
    .codehilite .err { background: #ff3300; color: #fff !important; } 

  table#module-list {
    font-size: 110%;
  }

    table#module-list tr td:first-child {
      padding-right: 10px;
      white-space: nowrap;
    }

    table#module-list td {
      vertical-align: top;
      padding-bottom: 8px;
    }

      table#module-list td p {
        margin: 0 0 7px 0;
      }

  .def {
    display: table;
  }

    .def p {
      display: table-cell;
      vertical-align: top;
      text-align: left;
    }

    .def p:first-child {
      white-space: nowrap;
    }

    .def p:last-child {
      width: 100%;
    }


  #index {
    list-style-type: none;
    margin: 0;
    padding: 0;
  }
    ul#index .class_name {
      /* font-size: 110%; */
      font-weight: bold;
    }
    #index ul {
      margin: 0;
    }

  .item {
    margin: 0 0 15px 0;
  }

    .item .class {
      margin: 0 0 25px 30px;
    }

      .item .class ul.class_list {
        margin: 0 0 20px 0;
      }

    .item .name {
      background: #fafafa;
      margin: 0;
      font-weight: bold;
      padding: 5px 10px;
      border-radius: 3px;
      display: inline-block;
      min-width: 40%;
    }
      .item .name:hover {
        background: #f6f6f6;
      }

    .item .empty_desc {
      margin: 0 0 5px 0;
      padding: 0;
    }

    .item .inheritance {
      margin: 3px 0 0 30px;
    }

    .item .inherited {
      color: #666;
    }

    .item .desc {
      padding: 0 8px;
      margin: 0;
    }

      .item .desc p {
        margin: 0 0 10px 0;
      }

    .source_cont {
      margin: 0;
      padding: 0;
    }

    .source_link a {
      background: #ffc300;
      font-weight: 400;
      font-size: .75em;
      text-transform: uppercase;
      color: #fff;
      text-shadow: 1px 1px 0 #f4b700;
      
      padding: 3px 8px;
      border-radius: 2px;
      transition: background .3s ease-in-out;
    }
      .source_link a:hover {
        background: #FF7200;
        text-shadow: none;
        transition: background .3s ease-in-out;
      }

    .source {
      display: none;
      max-height: 600px;
      overflow-y: scroll;
      margin-bottom: 15px;
    }

      .source .codehilite {
        margin: 0;
      }

  .desc h1, .desc h2, .desc h3 {
    font-size: 100% !important;
  }
  .clear {
    clear: both;
  }

  @media all and (max-width: 950px) {
    #sidebar {
      width: 35%;
    }
    #content {
      width: 65%;
    }
  }
  @media all and (max-width: 650px) {
    #top {
      display: none;
    }
    #sidebar {
      float: none;
      width: auto;
    }
    #content {
      float: none;
      width: auto;
      padding: 30px;
    }

    #index ul {
      padding: 0;
      margin-bottom: 15px;
    }
    #index ul li {
      display: inline-block;
      margin-right: 30px;
    }
    #footer {
      text-align: left;
    }
    #footer p {
      display: block;
      margin: inherit;
    }
  }

  /*****************************/

  </style>

  <style type="text/css">
  .codehilite .hll { background-color: #ffffcc }
.codehilite  { background: #f8f8f8; }
.codehilite .c { color: #408080; font-style: italic } /* Comment */
.codehilite .err { border: 1px solid #FF0000 } /* Error */
.codehilite .k { color: #008000; font-weight: bold } /* Keyword */
.codehilite .o { color: #666666 } /* Operator */
.codehilite .cm { color: #408080; font-style: italic } /* Comment.Multiline */
.codehilite .cp { color: #BC7A00 } /* Comment.Preproc */
.codehilite .c1 { color: #408080; font-style: italic } /* Comment.Single */
.codehilite .cs { color: #408080; font-style: italic } /* Comment.Special */
.codehilite .gd { color: #A00000 } /* Generic.Deleted */
.codehilite .ge { font-style: italic } /* Generic.Emph */
.codehilite .gr { color: #FF0000 } /* Generic.Error */
.codehilite .gh { color: #000080; font-weight: bold } /* Generic.Heading */
.codehilite .gi { color: #00A000 } /* Generic.Inserted */
.codehilite .go { color: #888888 } /* Generic.Output */
.codehilite .gp { color: #000080; font-weight: bold } /* Generic.Prompt */
.codehilite .gs { font-weight: bold } /* Generic.Strong */
.codehilite .gu { color: #800080; font-weight: bold } /* Generic.Subheading */
.codehilite .gt { color: #0044DD } /* Generic.Traceback */
.codehilite .kc { color: #008000; font-weight: bold } /* Keyword.Constant */
.codehilite .kd { color: #008000; font-weight: bold } /* Keyword.Declaration */
.codehilite .kn { color: #008000; font-weight: bold } /* Keyword.Namespace */
.codehilite .kp { color: #008000 } /* Keyword.Pseudo */
.codehilite .kr { color: #008000; font-weight: bold } /* Keyword.Reserved */
.codehilite .kt { color: #B00040 } /* Keyword.Type */
.codehilite .m { color: #666666 } /* Literal.Number */
.codehilite .s { color: #BA2121 } /* Literal.String */
.codehilite .na { color: #7D9029 } /* Name.Attribute */
.codehilite .nb { color: #008000 } /* Name.Builtin */
.codehilite .nc { color: #0000FF; font-weight: bold } /* Name.Class */
.codehilite .no { color: #880000 } /* Name.Constant */
.codehilite .nd { color: #AA22FF } /* Name.Decorator */
.codehilite .ni { color: #999999; font-weight: bold } /* Name.Entity */
.codehilite .ne { color: #D2413A; font-weight: bold } /* Name.Exception */
.codehilite .nf { color: #0000FF } /* Name.Function */
.codehilite .nl { color: #A0A000 } /* Name.Label */
.codehilite .nn { color: #0000FF; font-weight: bold } /* Name.Namespace */
.codehilite .nt { color: #008000; font-weight: bold } /* Name.Tag */
.codehilite .nv { color: #19177C } /* Name.Variable */
.codehilite .ow { color: #AA22FF; font-weight: bold } /* Operator.Word */
.codehilite .w { color: #bbbbbb } /* Text.Whitespace */
.codehilite .mb { color: #666666 } /* Literal.Number.Bin */
.codehilite .mf { color: #666666 } /* Literal.Number.Float */
.codehilite .mh { color: #666666 } /* Literal.Number.Hex */
.codehilite .mi { color: #666666 } /* Literal.Number.Integer */
.codehilite .mo { color: #666666 } /* Literal.Number.Oct */
.codehilite .sb { color: #BA2121 } /* Literal.String.Backtick */
.codehilite .sc { color: #BA2121 } /* Literal.String.Char */
.codehilite .sd { color: #BA2121; font-style: italic } /* Literal.String.Doc */
.codehilite .s2 { color: #BA2121 } /* Literal.String.Double */
.codehilite .se { color: #BB6622; font-weight: bold } /* Literal.String.Escape */
.codehilite .sh { color: #BA2121 } /* Literal.String.Heredoc */
.codehilite .si { color: #BB6688; font-weight: bold } /* Literal.String.Interpol */
.codehilite .sx { color: #008000 } /* Literal.String.Other */
.codehilite .sr { color: #BB6688 } /* Literal.String.Regex */
.codehilite .s1 { color: #BA2121 } /* Literal.String.Single */
.codehilite .ss { color: #19177C } /* Literal.String.Symbol */
.codehilite .bp { color: #008000 } /* Name.Builtin.Pseudo */
.codehilite .vc { color: #19177C } /* Name.Variable.Class */
.codehilite .vg { color: #19177C } /* Name.Variable.Global */
.codehilite .vi { color: #19177C } /* Name.Variable.Instance */
.codehilite .il { color: #666666 } /* Literal.Number.Integer.Long */
  </style>

  <style type="text/css">
  
/* ==========================================================================
   EXAMPLE Media Queries for Responsive Design.
   These examples override the primary ('mobile first') styles.
   Modify as content requires.
   ========================================================================== */

@media only screen and (min-width: 35em) {
    /* Style adjustments for viewports that meet the condition */
}

@media print,
       (-o-min-device-pixel-ratio: 5/4),
       (-webkit-min-device-pixel-ratio: 1.25),
       (min-resolution: 120dpi) {
    /* Style adjustments for high resolution devices */
}

/* ==========================================================================
   Print styles.
   Inlined to avoid required HTTP connection: h5bp.com/r
   ========================================================================== */

@media print {
    * {
        background: transparent !important;
        color: #000 !important; /* Black prints faster: h5bp.com/s */
        box-shadow: none !important;
        text-shadow: none !important;
    }

    a,
    a:visited {
        text-decoration: underline;
    }

    a[href]:after {
        content: " (" attr(href) ")";
    }

    abbr[title]:after {
        content: " (" attr(title) ")";
    }

    /*
     * Don't show links for images, or javascript/internal links
     */

    .ir a:after,
    a[href^="javascript:"]:after,
    a[href^="#"]:after {
        content: "";
    }

    pre,
    blockquote {
        border: 1px solid #999;
        page-break-inside: avoid;
    }

    thead {
        display: table-header-group; /* h5bp.com/t */
    }

    tr,
    img {
        page-break-inside: avoid;
    }

    img {
        max-width: 100% !important;
    }

    @page {
        margin: 0.5cm;
    }

    p,
    h2,
    h3 {
        orphans: 3;
        widows: 3;
    }

    h2,
    h3 {
        page-break-after: avoid;
    }
}

  </style>

  <script type="text/javascript">
  function toggle(id, $link) {
    $node = document.getElementById(id);
    if (!$node)
    return;
    if (!$node.style.display || $node.style.display == 'none') {
    $node.style.display = 'block';
    $link.innerHTML = 'Hide source &nequiv;';
    } else {
    $node.style.display = 'none';
    $link.innerHTML = 'Show source &equiv;';
    }
  }
  </script>
</head>
<body>
<a href="#" id="top">Top</a>

<div id="container">
    
  
  <div id="sidebar">
    <h1>Index</h1>
    <ul id="index">

    <li class="set"><h3><a href="#header-functions">Functions</a></h3>
      
  <ul>
    <li class="mono"><a href="#frankly.generate_identity_token">generate_identity_token</a></li>
  </ul>

    </li>

    <li class="set"><h3><a href="#header-classes">Classes</a></h3>
      <ul>
        <li class="mono">
        <span class="class_name"><a href="#frankly.FranklyClient">FranklyClient</a></span>
        
          
  <ul>
    <li class="mono"><a href="#frankly.FranklyClient.__init__">__init__</a></li>
    <li class="mono"><a href="#frankly.FranklyClient.authenticate">authenticate</a></li>
    <li class="mono"><a href="#frankly.FranklyClient.close">close</a></li>
    <li class="mono"><a href="#frankly.FranklyClient.create">create</a></li>
    <li class="mono"><a href="#frankly.FranklyClient.create_announcement">create_announcement</a></li>
    <li class="mono"><a href="#frankly.FranklyClient.create_file">create_file</a></li>
    <li class="mono"><a href="#frankly.FranklyClient.create_room">create_room</a></li>
    <li class="mono"><a href="#frankly.FranklyClient.create_room_message">create_room_message</a></li>
    <li class="mono"><a href="#frankly.FranklyClient.delete">delete</a></li>
    <li class="mono"><a href="#frankly.FranklyClient.delete_announcement">delete_announcement</a></li>
    <li class="mono"><a href="#frankly.FranklyClient.delete_room">delete_room</a></li>
    <li class="mono"><a href="#frankly.FranklyClient.publish_announcement">publish_announcement</a></li>
    <li class="mono"><a href="#frankly.FranklyClient.read">read</a></li>
    <li class="mono"><a href="#frankly.FranklyClient.read_announcement">read_announcement</a></li>
    <li class="mono"><a href="#frankly.FranklyClient.read_announcement_list">read_announcement_list</a></li>
    <li class="mono"><a href="#frankly.FranklyClient.read_announcement_room_list">read_announcement_room_list</a></li>
    <li class="mono"><a href="#frankly.FranklyClient.read_room">read_room</a></li>
    <li class="mono"><a href="#frankly.FranklyClient.read_room_list">read_room_list</a></li>
    <li class="mono"><a href="#frankly.FranklyClient.read_room_message_list">read_room_message_list</a></li>
    <li class="mono"><a href="#frankly.FranklyClient.update">update</a></li>
    <li class="mono"><a href="#frankly.FranklyClient.update_file">update_file</a></li>
    <li class="mono"><a href="#frankly.FranklyClient.update_file_from_path">update_file_from_path</a></li>
    <li class="mono"><a href="#frankly.FranklyClient.update_room">update_room</a></li>
    <li class="mono"><a href="#frankly.FranklyClient.upload">upload</a></li>
    <li class="mono"><a href="#frankly.FranklyClient.upload_file">upload_file</a></li>
    <li class="mono"><a href="#frankly.FranklyClient.upload_file_from_path">upload_file_from_path</a></li>
  </ul>

        </li>
        <li class="mono">
        <span class="class_name"><a href="#frankly.FranklyError">FranklyError</a></span>
        
          
  <ul>
    <li class="mono"><a href="#frankly.FranklyError.__init__">__init__</a></li>
  </ul>

        </li>
      </ul>
    </li>

    </ul>
  </div>

    <article id="content">
      
  

  


  <header id="section-intro">
  <h1 class="title"><span class="name">frankly</span> module</h1>
  <p>The module provides types and functions for interacting with the <strong>Frankly API</strong>.</p>
<h1>Goal</h1>
<p>Frankly exposes a REST API to give a higer control to customers over the way
they want to use the platform.
Most operations available through the <strong>Frankly Console</strong> can be automated by
querying the <strong>Frankly API</strong> directly.</p>
<p>But the API needing to be secure and flexible a developer needs to master a
couple of concepts about how it works to take most advantage of it.
To make the learning curve smoother and development faster the frankly module
exposes operations available on the API through python methods of a client
object.</p>
<p>Things like authentication which are redundant and unproductive tasks are
nicely abstracted by the module to help developers focus on the core of what
they need to get done with the <strong>Frankly API</strong>.</p>
<h1>Installation</h1>
<p>The frankly module can be installed like most python modules using pip:</p>
<p><code>$ pip install git+https://github.com/franklyinc/frankly-python.git#egg=frankly</code></p>
<h1>Usage</h1>
<p>The sections bellow explain how to use the module to authenticate and query
the <strong>Frankly API</strong>.</p>
<p>All operations to the API are made from instances of the <code>FranklyClient</code> class.
Those objects expose methods to the application which map to remote procedure
calls (RPC) on the <strong>Frankly</strong> servers, they also negotiate and maintain the
state required by the API's security policies.</p>
<p>Here's how <code>FranklyClient</code> instances are created:</p>
<div class="codehilite"><pre><span class="kn">from</span> <span class="nn">frankly</span> <span class="kn">import</span> <span class="n">FranklyClient</span>

<span class="n">client</span> <span class="o">=</span> <span class="n">FranklyClient</span><span class="p">()</span>
</pre></div>


<h2>Authentication</h2>
<p>Before performing any operation (calling any method) the client instance needs
to authenticate against Frankly API.
The API supports different level of permissions but this module is design to
only allow <em>admin</em> authentication.</p>
<p>When authenticating as an <em>admin</em> user the client needs to be given the <code>app_key</code>
and <code>app_secret</code> values obtained from the <a href="https://console.franklychat.com/"><strong>Frankly Console</strong></a>.</p>
<p>Here's how to perform authentication:</p>
<div class="codehilite"><pre><span class="kn">from</span> <span class="nn">frankly</span> <span class="kn">import</span> <span class="n">FranklyClient</span>

<span class="n">app_key</span>    <span class="o">=</span> <span class="s">&#39;app_key from Frankly Console&#39;</span>
<span class="n">app_secret</span> <span class="o">=</span> <span class="s">&#39;app_secret from Frankly Console&#39;</span>

<span class="n">client</span> <span class="o">=</span> <span class="n">FranklyClient</span><span class="p">()</span>
<span class="n">client</span><span class="o">.</span><span class="n">authenticate</span><span class="p">(</span><span class="n">app_key</span><span class="p">,</span> <span class="n">app_secret</span><span class="p">)</span>
</pre></div>


<p>If the call to <code>authenticate</code> returns then authentication was successful and
the application can move on and use this instance of <code>FranklyClient</code> to perform
other operations.</p>
<p><em>Publishing the <code>app_secret</code> value to the public can have security implications
and could be used by an attacker to alter the content of an application.</em></p>
<h2>Rooms</h2>
<p>One of the central concepts in the <strong>Frankly API</strong> is the chat room.
An application can create, update and delete chat rooms. A chat room can be
seen as a collection of messages, with some associated meta-data like the title,
description or avatar image to be displayed when the end users access the mobile
or web app embedding a <strong>Frankly SDK</strong>.</p>
<p>This code snippet shows how to create chat rooms:</p>
<div class="codehilite"><pre><span class="kn">from</span> <span class="nn">frankly</span> <span class="kn">import</span> <span class="n">FranklyClient</span>

<span class="o">...</span>

<span class="n">room</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">create_room</span><span class="p">(</span>
    <span class="n">title</span>       <span class="o">=</span> <span class="s">&#39;Hi&#39;</span><span class="p">,</span>
    <span class="n">description</span> <span class="o">=</span> <span class="s">&#39;My First Chat Room&#39;</span><span class="p">,</span>
    <span class="n">status</span>      <span class="o">=</span> <span class="s">&#39;active&#39;</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>


<p>As we can see here, when creating a room the application must specify a <em>status</em>
property which can be one of the following:</p>
<ul>
<li>
<p><code>unpublished</code> in this state the room will not be shown to clients fetching the
list of available rooms in the app, this is useful if the application needs to
create rooms that shouldn't be available yet because they still need to be modified.</p>
</li>
<li>
<p><code>active</code> in this state the room will be displayed in all clients fetching the
list of available rooms that end users can join to start chatting with each other.</p>
</li>
<li>
<p><code>inactive</code> this last state is an intermediary state between the first two, the
room will be part of fetching operations but they will not be displayed in the
mobile or web app UI, it is useful for testing purposes.</p>
</li>
</ul>
<h2>Messages</h2>
<p>Frankly being a chat platform it allows applications to send and receive messages.
Naturally <code>FranklyClient</code> instances can publish and fetch messages to chat rooms.</p>
<p>This code snippet shows hot to create messages:</p>
<div class="codehilite"><pre><span class="kn">from</span> <span class="nn">frankly</span> <span class="kn">import</span> <span class="n">FranklyClient</span>

<span class="o">...</span>

<span class="n">message1</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">create_message</span><span class="p">(</span>
    <span class="n">room</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
    <span class="n">contents</span> <span class="o">=</span> <span class="p">[{</span>
      <span class="s">&#39;type&#39;</span> <span class="p">:</span> <span class="s">&#39;text/plain&#39;</span><span class="p">,</span>
      <span class="s">&#39;value&#39;</span><span class="p">:</span> <span class="s">&#39;Hello World!&#39;</span><span class="p">,</span>
    <span class="p">}],</span>
<span class="p">)</span>

<span class="n">message2</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">create_message</span><span class="p">(</span>
    <span class="n">room</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
    <span class="n">contents</span> <span class="o">=</span> <span class="p">[{</span>
      <span class="s">&#39;type&#39;</span><span class="p">:</span> <span class="s">&#39;image/*&#39;</span><span class="p">,</span>
      <span class="s">&#39;url&#39;</span> <span class="p">:</span> <span class="s">&#39;https://app.franklychat.com/files/...&#39;</span><span class="p">,</span>
    <span class="p">}]</span>
<span class="p">)</span>
</pre></div>


<p>Let's explain quickly what's happening here: messages published to chat rooms
actually support multiple parts, they may contain few text entries, or a text
and an image, etc... So the <em>contents</em> property is actually a list of objects.
Fields of the content objects are:</p>
<ul>
<li>
<p><code>type</code> which is the mime type of the actual content it represent and gives
the application informations about how to render the content. This is mandatory.</p>
</li>
<li>
<p><code>value</code> which is used for inline resources directly embedded into the message.</p>
</li>
<li>
<p><code>url</code> which is used for remote resources that the application can upload and
download in parallel of sending or receiving messages. On of <em>value</em> or <em>url</em>
must be specified.</p>
</li>
</ul>
<p>Typically, text messages are inlined because they are small enough resources
that they can be embedded into the message without impact user experience.
Images on the other end may take a while to download and rendering can be
optimized using caching mechanisms to avoid downloading large resources too
often, that's why they should provided as a remote resource (we'll see later
in the <em>Files</em> section how to generate remote resource URLs).</p>
<p><em>Keep in mind that messages will be broadcasted to every client application
currently listening for messages on the same chat room when they are created.</em></p>
<h2>Announcements</h2>
<p>Announcements are a different type of messages which are only available to
admin users.<br />
A client authenticated with admin priviledges can create announcements in the
app, which can then be published to one or more rooms at a later time.</p>
<p>In mobile and web apps embedding a <strong>Frankly SDK</strong>, announcements are rendered
differently from regular messages, they are highlighted and can be forced to
stick at the top of the chat room UI to give some context to end users about
what is currently ongoing.</p>
<p>Here's how an app using the frankly module would create and then publish
announcements:</p>
<div class="codehilite"><pre><span class="kn">from</span> <span class="nn">frankly</span> <span class="kn">import</span> <span class="n">FranklyClient</span>

<span class="o">...</span>

<span class="n">anno</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">create_announcement</span><span class="p">(</span>
    <span class="n">contents</span> <span class="o">=</span> <span class="p">[{</span>
      <span class="s">&#39;type&#39;</span> <span class="p">:</span> <span class="s">&#39;text/plain&#39;</span><span class="p">,</span>
      <span class="s">&#39;value&#39;</span><span class="p">:</span> <span class="s">&#39;Welcome!&#39;</span><span class="p">,</span>
    <span class="p">}],</span>
<span class="p">)</span>

<span class="n">client</span><span class="o">.</span><span class="n">publish_announcement</span><span class="p">(</span>
    <span class="n">anno</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
    <span class="n">room</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>


<p>As we can see here, the announcement is created with the same structure than
a regular message.<br />
The content of the announcement is actually what is going to be set as the
message content when published to a room and obeys the same rules that were
described in the <em>Messages</em> section regarding inline and remote content.</p>
<h2>Files</h2>
<p>Objects of the <strong>Frankly API</strong> can have URL properties set to reference
remote resources like images. All these URLs must be within the
<code>https://app.franklychat.com</code> domain, which means an application must
upload these resources to Frankly servers.  </p>
<p>Uploading a file happens in two steps, first the application needs to
request a new file URL to the <strong>Frankly API</strong>, then it can use that URL to
upload a resource to Frankly servers.<br />
Lukily the frankly module abstracts this nicely in a single operation, here's
an example of how to set an image for a chat room:</p>
<div class="codehilite"><pre><span class="kn">from</span> <span class="nn">frankly</span> <span class="kn">import</span> <span class="n">FranklyClient</span>

<span class="o">...</span>

<span class="nb">file</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">upload_file_from_path</span><span class="p">(</span>
    <span class="s">&#39;./path/to/image.png&#39;</span><span class="p">,</span>
    <span class="n">category</span> <span class="o">=</span> <span class="s">&#39;roomavatar&#39;</span><span class="p">,</span>
<span class="p">)</span>

<span class="n">room</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">update_room</span><span class="p">(</span>
    <span class="n">room</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
    <span class="n">avatar_image_url</span> <span class="o">=</span> <span class="nb">file</span><span class="o">.</span><span class="n">url</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>


<p>The object returned by a call to <code>upload_file_from_path</code> and other upload
methods is created in the first step described above.<br />
The <code>category</code> parameter shown here is a hint given the the <strong>Frankly API</strong>
to know what formatting rules should be applied to the resource. This is
useful to provide a better integration with Frankly and better user experience
as files will be optimized for different situations based on their category.</p>
<p>Here are the file categories currently available:</p>
<ul>
<li>
<p><code>chat</code><br />
The default category which is usually applied to images sent by end users.</p>
</li>
<li>
<p><code>useravatar</code><br />
This category optimizes files intended to be displayed as part of a user
profile.</p>
</li>
<li>
<p><code>roomavatar</code><br />
This category optimizes files intended to be displayed on room lists.</p>
</li>
<li>
<p><code>featuredavatar</code><br />
Used for files intended to be displayed to represent featued rooms.</p>
</li>
<li>
<p><code>sticker</code><br />
This category optimizes files that are used for sticker messages.</p>
</li>
<li>
<p><code>stickerpack</code><br />
for being used as an avatar of a sticker pack.</p>
</li>
</ul>
<h2>Errors</h2>
<p>When the application is misusing the <strong>Frankly API</strong> or when things go wrong
at a different level (network going down, ...), calls to methods of a
<code>FranklyClient</code> instance may not return and instead would raise an exception.</p>
<p>All exceptions raised by calls to the methods will be instances of <code>FranklyError</code>.</p>
<p>The errors give some context about what went wrong, here's a quick example
showing how to handle those situations:</p>
<div class="codehilite"><pre><span class="kn">from</span> <span class="nn">frankly</span> <span class="kn">import</span> <span class="n">FranklyClient</span>
<span class="kn">from</span> <span class="nn">frankly</span> <span class="kn">import</span> <span class="n">FranklyError</span>

<span class="o">...</span>

<span class="k">try</span><span class="p">:</span>
    <span class="n">client</span> <span class="o">=</span> <span class="n">FranklyClient</span><span class="p">()</span>
    <span class="n">client</span><span class="o">.</span><span class="n">authenticate</span><span class="p">(</span><span class="n">app_key</span><span class="p">,</span> <span class="n">app_secret</span><span class="p">)</span>

    <span class="o">...</span>

<span class="k">except</span> <span class="n">FranklyError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</pre></div>
  
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-frankly', this);">Show source &equiv;</a></p>
  <div id="source-frankly" class="source">
    <div class="codehilite"><pre><span class="c">##</span>
<span class="c"># The MIT License (MIT)</span>
<span class="c">#</span>
<span class="c"># Copyright (c) 2015 Frankly Inc.</span>
<span class="c">#</span>
<span class="c"># Permission is hereby granted, free of charge, to any person obtaining a copy</span>
<span class="c"># of this software and associated documentation files (the &quot;Software&quot;), to deal</span>
<span class="c"># in the Software without restriction, including without limitation the rights</span>
<span class="c"># to use, copy, modify, merge, publish, distribute, sublicense, and/or sell</span>
<span class="c"># copies of the Software, and to permit persons to whom the Software is</span>
<span class="c"># furnished to do so, subject to the following conditions:</span>
<span class="c">#</span>
<span class="c"># The above copyright notice and this permission notice shall be included in all</span>
<span class="c"># copies or substantial portions of the Software.</span>
<span class="c">#</span>
<span class="c"># THE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR</span>
<span class="c"># IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,</span>
<span class="c"># FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE</span>
<span class="c"># AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER</span>
<span class="c"># LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,</span>
<span class="c"># OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE</span>
<span class="c"># SOFTWARE.</span>
<span class="c">##</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">The module provides types and functions for interacting with the **Frankly API**.</span>

<span class="sd">Goal</span>
<span class="sd">====</span>

<span class="sd">Frankly exposes a REST API to give a higer control to customers over the way</span>
<span class="sd">they want to use the platform.</span>
<span class="sd">Most operations available through the **Frankly Console** can be automated by</span>
<span class="sd">querying the **Frankly API** directly.</span>

<span class="sd">But the API needing to be secure and flexible a developer needs to master a</span>
<span class="sd">couple of concepts about how it works to take most advantage of it.</span>
<span class="sd">To make the learning curve smoother and development faster the frankly module</span>
<span class="sd">exposes operations available on the API through python methods of a client</span>
<span class="sd">object.</span>

<span class="sd">Things like authentication which are redundant and unproductive tasks are</span>
<span class="sd">nicely abstracted by the module to help developers focus on the core of what</span>
<span class="sd">they need to get done with the **Frankly API**.</span>

<span class="sd">Installation</span>
<span class="sd">============</span>

<span class="sd">The frankly module can be installed like most python modules using pip:</span>

<span class="sd">```</span>
<span class="sd">$ pip install git+https://github.com/franklyinc/frankly-python.git#egg=frankly</span>
<span class="sd">```</span>

<span class="sd">Usage</span>
<span class="sd">=====</span>

<span class="sd">The sections bellow explain how to use the module to authenticate and query</span>
<span class="sd">the **Frankly API**.</span>

<span class="sd">All operations to the API are made from instances of the `FranklyClient` class.</span>
<span class="sd">Those objects expose methods to the application which map to remote procedure</span>
<span class="sd">calls (RPC) on the **Frankly** servers, they also negotiate and maintain the</span>
<span class="sd">state required by the API&#39;s security policies.</span>

<span class="sd">Here&#39;s how `FranklyClient` instances are created:</span>

<span class="sd">    from frankly import FranklyClient</span>

<span class="sd">    client = FranklyClient()</span>

<span class="sd">Authentication</span>
<span class="sd">--------------</span>

<span class="sd">Before performing any operation (calling any method) the client instance needs</span>
<span class="sd">to authenticate against Frankly API.</span>
<span class="sd">The API supports different level of permissions but this module is design to</span>
<span class="sd">only allow *admin* authentication.</span>

<span class="sd">When authenticating as an *admin* user the client needs to be given the `app_key`</span>
<span class="sd">and `app_secret` values obtained from the [**Frankly Console**](https://console.franklychat.com/).</span>

<span class="sd">Here&#39;s how to perform authentication:</span>

<span class="sd">    from frankly import FranklyClient</span>

<span class="sd">    app_key    = &#39;app_key from Frankly Console&#39;</span>
<span class="sd">    app_secret = &#39;app_secret from Frankly Console&#39;</span>

<span class="sd">    client = FranklyClient()</span>
<span class="sd">    client.authenticate(app_key, app_secret)</span>

<span class="sd">If the call to `authenticate` returns then authentication was successful and</span>
<span class="sd">the application can move on and use this instance of `FranklyClient` to perform</span>
<span class="sd">other operations.</span>

<span class="sd">*Publishing the `app_secret` value to the public can have security implications</span>
<span class="sd">and could be used by an attacker to alter the content of an application.*</span>

<span class="sd">Rooms</span>
<span class="sd">-----</span>

<span class="sd">One of the central concepts in the **Frankly API** is the chat room.</span>
<span class="sd">An application can create, update and delete chat rooms. A chat room can be</span>
<span class="sd">seen as a collection of messages, with some associated meta-data like the title,</span>
<span class="sd">description or avatar image to be displayed when the end users access the mobile</span>
<span class="sd">or web app embedding a **Frankly SDK**.</span>

<span class="sd">This code snippet shows how to create chat rooms:</span>

<span class="sd">    from frankly import FranklyClient</span>

<span class="sd">    ...</span>

<span class="sd">    room = client.create_room(</span>
<span class="sd">        title       = &#39;Hi&#39;,</span>
<span class="sd">        description = &#39;My First Chat Room&#39;,</span>
<span class="sd">        status      = &#39;active&#39;,</span>
<span class="sd">    )</span>

<span class="sd">As we can see here, when creating a room the application must specify a *status*</span>
<span class="sd">property which can be one of the following:</span>

<span class="sd">- `unpublished` in this state the room will not be shown to clients fetching the</span>
<span class="sd">list of available rooms in the app, this is useful if the application needs to</span>
<span class="sd">create rooms that shouldn&#39;t be available yet because they still need to be modified.</span>

<span class="sd">- `active` in this state the room will be displayed in all clients fetching the</span>
<span class="sd">list of available rooms that end users can join to start chatting with each other.</span>

<span class="sd">- `inactive` this last state is an intermediary state between the first two, the</span>
<span class="sd">room will be part of fetching operations but they will not be displayed in the</span>
<span class="sd">mobile or web app UI, it is useful for testing purposes.</span>

<span class="sd">Messages</span>
<span class="sd">--------</span>

<span class="sd">Frankly being a chat platform it allows applications to send and receive messages.</span>
<span class="sd">Naturally `FranklyClient` instances can publish and fetch messages to chat rooms.</span>

<span class="sd">This code snippet shows hot to create messages:</span>

<span class="sd">    from frankly import FranklyClient</span>

<span class="sd">    ...</span>

<span class="sd">    message1 = client.create_message(</span>
<span class="sd">        room.id,</span>
<span class="sd">        contents = [{</span>
<span class="sd">          &#39;type&#39; : &#39;text/plain&#39;,</span>
<span class="sd">          &#39;value&#39;: &#39;Hello World!&#39;,</span>
<span class="sd">        }],</span>
<span class="sd">    )</span>

<span class="sd">    message2 = client.create_message(</span>
<span class="sd">        room.id,</span>
<span class="sd">        contents = [{</span>
<span class="sd">          &#39;type&#39;: &#39;image/*&#39;,</span>
<span class="sd">          &#39;url&#39; : &#39;https://app.franklychat.com/files/...&#39;,</span>
<span class="sd">        }]</span>
<span class="sd">    )</span>

<span class="sd">Let&#39;s explain quickly what&#39;s happening here: messages published to chat rooms</span>
<span class="sd">actually support multiple parts, they may contain few text entries, or a text</span>
<span class="sd">and an image, etc... So the *contents* property is actually a list of objects.</span>
<span class="sd">Fields of the content objects are:</span>

<span class="sd">- `type` which is the mime type of the actual content it represent and gives</span>
<span class="sd">the application informations about how to render the content. This is mandatory.</span>

<span class="sd">- `value` which is used for inline resources directly embedded into the message.</span>

<span class="sd">- `url` which is used for remote resources that the application can upload and</span>
<span class="sd">download in parallel of sending or receiving messages. On of *value* or *url*</span>
<span class="sd">must be specified.</span>

<span class="sd">Typically, text messages are inlined because they are small enough resources</span>
<span class="sd">that they can be embedded into the message without impact user experience.</span>
<span class="sd">Images on the other end may take a while to download and rendering can be</span>
<span class="sd">optimized using caching mechanisms to avoid downloading large resources too</span>
<span class="sd">often, that&#39;s why they should provided as a remote resource (we&#39;ll see later</span>
<span class="sd">in the *Files* section how to generate remote resource URLs).</span>

<span class="sd">*Keep in mind that messages will be broadcasted to every client application</span>
<span class="sd">currently listening for messages on the same chat room when they are created.*</span>

<span class="sd">Announcements</span>
<span class="sd">-------------</span>

<span class="sd">Announcements are a different type of messages which are only available to</span>
<span class="sd">admin users.  </span>
<span class="sd">A client authenticated with admin priviledges can create announcements in the</span>
<span class="sd">app, which can then be published to one or more rooms at a later time.</span>

<span class="sd">In mobile and web apps embedding a **Frankly SDK**, announcements are rendered</span>
<span class="sd">differently from regular messages, they are highlighted and can be forced to</span>
<span class="sd">stick at the top of the chat room UI to give some context to end users about</span>
<span class="sd">what is currently ongoing.</span>

<span class="sd">Here&#39;s how an app using the frankly module would create and then publish</span>
<span class="sd">announcements:</span>

<span class="sd">    from frankly import FranklyClient</span>

<span class="sd">    ...</span>

<span class="sd">    anno = client.create_announcement(</span>
<span class="sd">        contents = [{</span>
<span class="sd">          &#39;type&#39; : &#39;text/plain&#39;,</span>
<span class="sd">          &#39;value&#39;: &#39;Welcome!&#39;,</span>
<span class="sd">        }],</span>
<span class="sd">    )</span>

<span class="sd">    client.publish_announcement(</span>
<span class="sd">        anno.id,</span>
<span class="sd">        room.id,</span>
<span class="sd">    )</span>

<span class="sd">As we can see here, the announcement is created with the same structure than</span>
<span class="sd">a regular message.  </span>
<span class="sd">The content of the announcement is actually what is going to be set as the</span>
<span class="sd">message content when published to a room and obeys the same rules that were</span>
<span class="sd">described in the *Messages* section regarding inline and remote content.</span>

<span class="sd">Files</span>
<span class="sd">-----</span>

<span class="sd">Objects of the **Frankly API** can have URL properties set to reference</span>
<span class="sd">remote resources like images. All these URLs must be within the</span>
<span class="sd">```https://app.franklychat.com``` domain, which means an application must</span>
<span class="sd">upload these resources to Frankly servers.  </span>

<span class="sd">Uploading a file happens in two steps, first the application needs to</span>
<span class="sd">request a new file URL to the **Frankly API**, then it can use that URL to</span>
<span class="sd">upload a resource to Frankly servers.  </span>
<span class="sd">Lukily the frankly module abstracts this nicely in a single operation, here&#39;s</span>
<span class="sd">an example of how to set an image for a chat room:</span>

<span class="sd">    from frankly import FranklyClient</span>

<span class="sd">    ...</span>

<span class="sd">    file = client.upload_file_from_path(</span>
<span class="sd">        &#39;./path/to/image.png&#39;,</span>
<span class="sd">        category = &#39;roomavatar&#39;,</span>
<span class="sd">    )</span>

<span class="sd">    room = client.update_room(</span>
<span class="sd">        room.id,</span>
<span class="sd">        avatar_image_url = file.url,</span>
<span class="sd">    )</span>

<span class="sd">The object returned by a call to `upload_file_from_path` and other upload</span>
<span class="sd">methods is created in the first step described above.  </span>
<span class="sd">The `category` parameter shown here is a hint given the the **Frankly API**</span>
<span class="sd">to know what formatting rules should be applied to the resource. This is</span>
<span class="sd">useful to provide a better integration with Frankly and better user experience</span>
<span class="sd">as files will be optimized for different situations based on their category.</span>

<span class="sd">Here are the file categories currently available:</span>

<span class="sd">- `chat`  </span>
<span class="sd">The default category which is usually applied to images sent by end users.</span>

<span class="sd">- `useravatar`  </span>
<span class="sd">This category optimizes files intended to be displayed as part of a user</span>
<span class="sd">profile.</span>

<span class="sd">- `roomavatar`  </span>
<span class="sd">This category optimizes files intended to be displayed on room lists.</span>

<span class="sd">- `featuredavatar`  </span>
<span class="sd">Used for files intended to be displayed to represent featued rooms.</span>

<span class="sd">- `sticker`  </span>
<span class="sd">This category optimizes files that are used for sticker messages.</span>

<span class="sd">- `stickerpack`  </span>
<span class="sd">for being used as an avatar of a sticker pack.</span>

<span class="sd">Errors</span>
<span class="sd">------</span>

<span class="sd">When the application is misusing the **Frankly API** or when things go wrong</span>
<span class="sd">at a different level (network going down, ...), calls to methods of a</span>
<span class="sd">`FranklyClient` instance may not return and instead would raise an exception.</span>

<span class="sd">All exceptions raised by calls to the methods will be instances of `FranklyError`.</span>

<span class="sd">The errors give some context about what went wrong, here&#39;s a quick example</span>
<span class="sd">showing how to handle those situations:</span>

<span class="sd">    from frankly import FranklyClient</span>
<span class="sd">    from frankly import FranklyError</span>

<span class="sd">    ...</span>

<span class="sd">    try:</span>
<span class="sd">        client = FranklyClient()</span>
<span class="sd">        client.authenticate(app_key, app_secret)</span>

<span class="sd">        ...</span>

<span class="sd">    except FranklyError as e:</span>
<span class="sd">        print(e)</span>

<span class="sd">&quot;&quot;&quot;</span>
<span class="kn">from</span> <span class="nn">__future__</span> <span class="kn">import</span> <span class="n">division</span>
<span class="kn">from</span> <span class="nn">__future__</span> <span class="kn">import</span> <span class="n">absolute_import</span>
<span class="kn">from</span> <span class="nn">__future__</span> <span class="kn">import</span> <span class="n">print_function</span>
<span class="kn">from</span> <span class="nn">__future__</span> <span class="kn">import</span> <span class="n">unicode_literals</span>

<span class="kn">from</span> <span class="nn">copy</span> <span class="kn">import</span> <span class="n">deepcopy</span>
<span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">datetime</span>
<span class="kn">from</span> <span class="nn">dateutil.parser</span> <span class="kn">import</span> <span class="n">parse</span> <span class="k">as</span> <span class="n">parse_date</span>
<span class="kn">from</span> <span class="nn">functools</span> <span class="kn">import</span> <span class="n">wraps</span>
<span class="kn">from</span> <span class="nn">json</span> <span class="kn">import</span> <span class="n">JSONDecoder</span> <span class="k">as</span> <span class="n">BaseJsonDecoder</span>
<span class="kn">from</span> <span class="nn">json</span> <span class="kn">import</span> <span class="n">JSONEncoder</span> <span class="k">as</span> <span class="n">BaseJsonEncoder</span>
<span class="kn">from</span> <span class="nn">requests.exceptions</span> <span class="kn">import</span> <span class="n">RequestException</span>
<span class="kn">from</span> <span class="nn">requests.exceptions</span> <span class="kn">import</span> <span class="n">ConnectionError</span>
<span class="kn">from</span> <span class="nn">requests.exceptions</span> <span class="kn">import</span> <span class="n">HTTPError</span>
<span class="kn">from</span> <span class="nn">requests.exceptions</span> <span class="kn">import</span> <span class="n">URLRequired</span>
<span class="kn">from</span> <span class="nn">requests.exceptions</span> <span class="kn">import</span> <span class="n">TooManyRedirects</span>
<span class="kn">from</span> <span class="nn">requests.exceptions</span> <span class="kn">import</span> <span class="n">ConnectTimeout</span>
<span class="kn">from</span> <span class="nn">requests.exceptions</span> <span class="kn">import</span> <span class="n">ReadTimeout</span>
<span class="kn">from</span> <span class="nn">requests.exceptions</span> <span class="kn">import</span> <span class="n">Timeout</span>
<span class="kn">from</span> <span class="nn">six.moves.urllib.parse</span> <span class="kn">import</span> <span class="n">urlparse</span>

<span class="kn">import</span> <span class="nn">json</span>
<span class="kn">import</span> <span class="nn">jwt</span>
<span class="kn">import</span> <span class="nn">mimetypes</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">requests</span>
<span class="kn">import</span> <span class="nn">six</span>
<span class="kn">import</span> <span class="nn">time</span>

<span class="n">__all__</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s">&#39;generate_identity_token&#39;</span><span class="p">,</span>
    <span class="s">&#39;FranklyClient&#39;</span><span class="p">,</span>
    <span class="s">&#39;FranklyError&#39;</span><span class="p">,</span>
<span class="p">]</span>

<span class="k">def</span> <span class="nf">generate_identity_token</span><span class="p">(</span><span class="n">app_key</span><span class="p">,</span> <span class="n">app_secret</span><span class="p">,</span> <span class="n">nonce</span><span class="p">,</span> <span class="n">user_id</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">role</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    This function generates an identity token suitable for a signle</span>
<span class="sd">    authentication attempt of a client against the Frankly API or SDK.</span>

<span class="sd">    **Arguments**</span>

<span class="sd">    - `app_key (str)`  </span>
<span class="sd">    The key that specifies which app this client is authenticating for, this</span>
<span class="sd">    value is provided by the Frankly Console.</span>

<span class="sd">    - `app_secret (str)`  </span>
<span class="sd">    The secret value associated the the key allowing the client to securely</span>
<span class="sd">    authenticate against the Frankly API.</span>

<span class="sd">    - `nonce (str)`  </span>
<span class="sd">    The nonce value got from Frankly SDK or API whether the identity generation</span>
<span class="sd">    comes from an client device or app backend.</span>

<span class="sd">    - `user_id (object)`  </span>
<span class="sd">    This argument must be set to make the SDK operate on behalf of a specific</span>
<span class="sd">    user of the app.  </span>
<span class="sd">    For backend services willing to interact with the API directly this may be</span>
<span class="sd">    omitted.</span>

<span class="sd">    - `role (str)`  </span>
<span class="sd">    For backend services using the Frankly API this can be set to `&#39;admin&#39;` to</span>
<span class="sd">    generate a token allowing the client to get admin priviledges and perform</span>
<span class="sd">    operations that regular users are forbidden to.</span>

<span class="sd">    **Return**</span>

<span class="sd">    The function returns the generated identity token as a string.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">now</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">())</span>
    <span class="n">tok</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s">&#39;aak&#39;</span><span class="p">:</span> <span class="n">app_key</span><span class="p">,</span>
        <span class="s">&#39;iat&#39;</span><span class="p">:</span> <span class="n">now</span><span class="p">,</span>
        <span class="s">&#39;exp&#39;</span><span class="p">:</span> <span class="n">now</span> <span class="o">+</span> <span class="mi">864000</span><span class="p">,</span>
        <span class="s">&#39;nce&#39;</span><span class="p">:</span> <span class="n">nonce</span><span class="p">,</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="n">user_id</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">tok</span><span class="p">[</span><span class="s">&#39;uid&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">user_id</span>

    <span class="k">if</span> <span class="n">role</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">tok</span><span class="p">[</span><span class="s">&#39;role&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">role</span>

    <span class="n">idt</span> <span class="o">=</span> <span class="n">jwt</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="n">tok</span><span class="p">,</span> <span class="n">app_secret</span><span class="p">,</span> <span class="n">algorithm</span><span class="o">=</span><span class="s">&#39;HS256&#39;</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="p">{</span>
        <span class="s">&#39;typ&#39;</span><span class="p">:</span> <span class="s">&#39;JWS&#39;</span><span class="p">,</span>
        <span class="s">&#39;cty&#39;</span><span class="p">:</span> <span class="s">&#39;frankly-it;v1&#39;</span><span class="p">,</span>
    <span class="p">})</span>

    <span class="k">return</span> <span class="n">six</span><span class="o">.</span><span class="n">text_type</span><span class="p">(</span><span class="n">idt</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s">&#39;utf-8&#39;</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">FranklyClient</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    This class provides the implementation of a network client that exposes</span>
<span class="sd">    operations available on the Frankly API to a python application.</span>

<span class="sd">    A typical work flow is to create an instance of FranklyClient, using it</span>
<span class="sd">    to authenticate and then make method calls to interact with the API.  </span>
<span class="sd">    Reusing the same client instance multiple times allow the application to</span>
<span class="sd">    avoid wasting time re-authenticating before every operation.</span>

<span class="sd">    An application can create multiple instances of this class and authenticate</span>
<span class="sd">    with the same or different pairs of `app_key` and `app_secret`, each instance</span>
<span class="sd">    is independant from the other ones.</span>

<span class="sd">    Each instance of FranklyClient maintains its own connection pool to Frankly</span>
<span class="sd">    servers, if client is not required anymore the application should call the</span>
<span class="sd">    `close` method to release system resources.  </span>
<span class="sd">    A client should not be used anymore after being closed.  </span>
<span class="sd">    Note that instances of FranklyClient can be used as context managers to</span>
<span class="sd">    automatically be closed when exiting the `with` statement.</span>

<span class="sd">    **[thread safety]**  </span>
<span class="sd">    Python application using threads or libraries like [gevent](http://www.gevent.org/)</span>
<span class="sd">    can share instances of FranklyClient between multiple threads/coroutines</span>
<span class="sd">    only after sucessfuly authenticating.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">address</span><span class="o">=</span><span class="s">&#39;https://app.franklychat.com&#39;</span><span class="p">,</span> <span class="n">connect_timeout</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">request_timeout</span><span class="o">=</span><span class="mi">5</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Creates a new instance of this class.</span>

<span class="sd">        **Arguments**</span>

<span class="sd">        - `address (str)`  </span>
<span class="sd">        The URL at which Frankly servers can be reached, it&#39;s very unlikely that</span>
<span class="sd">        an application would need to change this value.</span>

<span class="sd">        - `connect_timeout (int or float)`  </span>
<span class="sd">        The maximum amount of time connecting to the API can take.</span>

<span class="sd">        - `request_timeout (int or float)`  </span>
<span class="sd">        The maximum amount of time submitting a request and receiving a response</span>
<span class="sd">        from the API can take.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">address</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span> <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">address</span><span class="p">,</span> <span class="n">six</span><span class="o">.</span><span class="n">text_type</span><span class="p">)):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s">&quot;address must be a string&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">connect_timeout</span><span class="p">,</span> <span class="nb">int</span><span class="p">)</span> <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">connect_timeout</span><span class="p">,</span> <span class="nb">float</span><span class="p">)):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s">&quot;connect timeout must be a int or float&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">request_timeout</span><span class="p">,</span> <span class="nb">int</span><span class="p">)</span> <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">request_timeout</span><span class="p">,</span> <span class="nb">float</span><span class="p">)):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s">&quot;request timeout must be a int or float&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">connect_timeout</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s">&quot;connect timeout must be a positive value&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">request_timeout</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s">&quot;request timeout must be a positive value&quot;</span><span class="p">)</span>

        <span class="n">url</span> <span class="o">=</span> <span class="n">urlparse</span><span class="p">(</span><span class="n">address</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">url</span><span class="o">.</span><span class="n">scheme</span> <span class="ow">in</span> <span class="p">(</span><span class="s">&#39;http&#39;</span><span class="p">,</span> <span class="s">&#39;https&#39;</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">backend</span> <span class="o">=</span> <span class="n">HttpBackend</span><span class="p">(</span>
                <span class="n">address</span><span class="p">,</span>
                <span class="n">connect_timeout</span> <span class="o">=</span> <span class="n">connect_timeout</span><span class="p">,</span>
                <span class="n">request_timeout</span> <span class="o">=</span> <span class="n">request_timeout</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">address</span> <span class="o">+</span> <span class="s">&quot; is not accessible through a supported protocol&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__enter__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span>

    <span class="k">def</span> <span class="nf">__exit__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">authenticate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">app_key</span><span class="p">,</span> <span class="n">app_secret</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        This should be the first method called on an instance of FranklyClient,</span>
<span class="sd">        after succesfully returning the client can be used to interact with the</span>
<span class="sd">        Frankly API.</span>

<span class="sd">        **Arguments**</span>

<span class="sd">        - `app_key (str)`  </span>
<span class="sd">        The key that specifies which app this client is authenticating for, this</span>
<span class="sd">        value is provided by the Frankly Console.</span>

<span class="sd">        - `app_secret (str)`  </span>
<span class="sd">        The secret value associated the the key allowing the client to securely</span>
<span class="sd">        authenticate against the Frankly API.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">backend</span><span class="o">.</span><span class="n">authenticate</span><span class="p">(</span><span class="n">app_key</span><span class="p">,</span> <span class="n">app_secret</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">close</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Shuts down all connections and releases system resources held by this</span>
<span class="sd">        client object.  </span>
<span class="sd">        The instance should not be used anymore after calling this method.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">backend</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">create</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">payload</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        This method exposes a generic interface for creating objects through</span>
<span class="sd">        the Frankly API.  </span>
<span class="sd">        Every `create_*` method is implemented on top of this one.</span>

<span class="sd">        **Arguments**</span>

<span class="sd">        - `path (list)`  </span>
<span class="sd">        A list of values representing the collection to create an object in.</span>

<span class="sd">        - `params (dict)`  </span>
<span class="sd">        Parameters passed as part of the request.</span>

<span class="sd">        - `payload (dict)`  </span>
<span class="sd">        Dict-like object representing the object to create.</span>

<span class="sd">        **Return**</span>

<span class="sd">        The method returns an object representing the newly created object.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">backend</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">params</span><span class="p">,</span> <span class="n">payload</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">create_announcement</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">payload</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Creates a new announcement object in the app.  </span>
<span class="sd">        The properties of that new announcement are given as keyword arguments</span>
<span class="sd">        to the method.</span>

<span class="sd">        **Arguments**</span>

<span class="sd">        - `contents (list)`  </span>
<span class="sd">        A list of content objects representing what will be embedded into the</span>
<span class="sd">        messages once the announcement is published to one or more rooms.  </span>
<span class="sd">        Refer to the *Announcement* and *Message* sections of the docuementation</span>
<span class="sd">        for more details about content objects.</span>

<span class="sd">        - `contextual (bool)`  </span>
<span class="sd">        Whether the announcement should be published as a contextual or regular</span>
<span class="sd">        messages.</span>

<span class="sd">        **Return**</span>

<span class="sd">        The method returns an object representing the newly created announcement.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">create</span><span class="p">([</span><span class="s">&#39;announcements&#39;</span><span class="p">],</span> <span class="n">payload</span><span class="o">=</span><span class="n">payload</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">create_file</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">payload</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Creates a new file object on Frankly servers and returns that object.  </span>
<span class="sd">        The properties of that new file are given as keyword argumenst to the</span>
<span class="sd">        method.</span>

<span class="sd">        **Arguments**</span>

<span class="sd">        - `category (str)`  </span>
<span class="sd">        One of the file categories supported by the API (see the *File* section</span>
<span class="sd">        of the documentation).</span>

<span class="sd">        - `type (str)`  </span>
<span class="sd">        One of the file types supported by the API (see the *File* section of</span>
<span class="sd">        the documentation).</span>

<span class="sd">        **Return**</span>

<span class="sd">        The method returns an object representing the newly created file.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">create</span><span class="p">([</span><span class="s">&#39;files&#39;</span><span class="p">],</span> <span class="n">params</span><span class="o">=</span><span class="n">payload</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">create_room</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">payload</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Creates a new room object in the app and return that object.  </span>
<span class="sd">        The properties of that new room are given as keyword arguments to the</span>
<span class="sd">        method.</span>

<span class="sd">        **Arguments**</span>

<span class="sd">        - `title (str)`  </span>
<span class="sd">        The title associated to this room.</span>

<span class="sd">        - `status (str)`  </span>
<span class="sd">        One of `&#39;unpublished&#39;`, `&#39;active&#39;` or `&#39;inactive&#39;`.</span>

<span class="sd">        - `description (str)`  </span>
<span class="sd">        A description of what this chat room is intended for, it is usually a</span>
<span class="sd">        short description of topics that are discussed by participants.</span>

<span class="sd">        - `avatar_image_url (str)`  </span>
<span class="sd">        The URL of an image to use when the room is displayed in one of the</span>
<span class="sd">        mobile or web apps embedding a Frankly SDK.</span>

<span class="sd">        - `featured_image_url (str)`  </span>
<span class="sd">        The URL of an image to use when the room is featured in one of the</span>
<span class="sd">        mobile or web apps embedding a Frankly SDK.</span>

<span class="sd">        - `featured (bool)`  </span>
<span class="sd">        Whether the room should be featured in the mobile or web apps embedding</span>
<span class="sd">        a Frankly SDK.</span>

<span class="sd">        **Return**</span>

<span class="sd">        The method returns an object representing the newly created room.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">create</span><span class="p">([</span><span class="s">&#39;rooms&#39;</span><span class="p">],</span> <span class="n">payload</span><span class="o">=</span><span class="n">payload</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">create_room_message</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">room_id</span><span class="p">,</span> <span class="o">**</span><span class="n">payload</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Creates a new message object in the room with id specified as first</span>
<span class="sd">        argument.  </span>
<span class="sd">        The properties of that new message are given as keyword arguments to the</span>
<span class="sd">        method.</span>

<span class="sd">        **Arguments**</span>

<span class="sd">        - `contents (list)`  </span>
<span class="sd">        A list of content objects representing what will be embedded into the</span>
<span class="sd">        messages once the announcement is published to one or more rooms.  </span>
<span class="sd">        Refer to the *Announcement* and *Message* sections of the docuementation</span>
<span class="sd">        for more details about content objects.</span>

<span class="sd">        **Return**</span>

<span class="sd">        The method returns an object representing the newly created message.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">create</span><span class="p">([</span><span class="s">&#39;rooms&#39;</span><span class="p">,</span> <span class="n">room_id</span><span class="p">,</span> <span class="s">&#39;messages&#39;</span><span class="p">],</span> <span class="n">payload</span><span class="o">=</span><span class="n">payload</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">read</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">payload</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">backend</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">params</span><span class="p">,</span> <span class="n">payload</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">read_room</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">room_id</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">read</span><span class="p">([</span><span class="s">&#39;rooms&#39;</span><span class="p">,</span> <span class="n">room_id</span><span class="p">])</span>

    <span class="k">def</span> <span class="nf">read_room_list</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">read</span><span class="p">([</span><span class="s">&#39;rooms&#39;</span><span class="p">])</span>

    <span class="k">def</span> <span class="nf">read_room_message_list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">room_id</span><span class="p">,</span> <span class="o">**</span><span class="n">params</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">read</span><span class="p">([</span><span class="s">&#39;rooms&#39;</span><span class="p">,</span> <span class="n">room_id</span><span class="p">,</span> <span class="s">&#39;messages&#39;</span><span class="p">],</span> <span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">read_announcement</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">announcement_id</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">read</span><span class="p">([</span><span class="s">&#39;announcements&#39;</span><span class="p">,</span> <span class="n">announcement_id</span><span class="p">])</span>

    <span class="k">def</span> <span class="nf">read_announcement_list</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">read</span><span class="p">([</span><span class="s">&#39;announcements&#39;</span><span class="p">])</span>

    <span class="k">def</span> <span class="nf">read_announcement_room_list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">announcement_id</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">read</span><span class="p">([</span><span class="s">&#39;announcements&#39;</span><span class="p">,</span> <span class="n">announcement_id</span><span class="p">,</span> <span class="s">&#39;rooms&#39;</span><span class="p">])</span>

    <span class="k">def</span> <span class="nf">update</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">payload</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">backend</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">params</span><span class="p">,</span> <span class="n">payload</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">update_room</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">room_id</span><span class="p">,</span> <span class="o">**</span><span class="n">payload</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">update</span><span class="p">([</span><span class="s">&#39;rooms&#39;</span><span class="p">,</span> <span class="n">room_id</span><span class="p">],</span> <span class="n">payload</span><span class="o">=</span><span class="n">payload</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">update_file</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="n">file_obj</span><span class="p">,</span> <span class="n">file_size</span><span class="p">,</span> <span class="n">mime_type</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">upload</span><span class="p">(</span>
            <span class="n">url</span><span class="p">,</span>
            <span class="n">payload</span>          <span class="o">=</span> <span class="n">file_obj</span><span class="p">,</span>
            <span class="n">content_length</span>   <span class="o">=</span> <span class="n">file_size</span><span class="p">,</span>
            <span class="n">content_type</span>     <span class="o">=</span> <span class="n">mime_type</span><span class="p">,</span>
            <span class="n">content_encoding</span> <span class="o">=</span> <span class="n">encoding</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="nf">update_file_from_path</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="n">file_path</span><span class="p">):</span>
        <span class="n">file_size</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">getsize</span><span class="p">(</span><span class="n">file_path</span><span class="p">)</span>
        <span class="n">mime_type</span><span class="p">,</span> <span class="n">encoding</span> <span class="o">=</span> <span class="n">mimetypes</span><span class="o">.</span><span class="n">guess_type</span><span class="p">(</span><span class="n">file_path</span><span class="p">)</span>

        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">file_path</span><span class="p">,</span> <span class="s">&#39;rb&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">file_obj</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">update_file</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">file_obj</span><span class="p">,</span> <span class="n">file_size</span><span class="p">,</span> <span class="n">mime_type</span><span class="p">,</span> <span class="n">encoding</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">delete</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">payload</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">backend</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">params</span><span class="p">,</span> <span class="n">payload</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">delete_room</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">room_id</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">delete</span><span class="p">([</span><span class="s">&#39;rooms&#39;</span><span class="p">,</span> <span class="n">room_id</span><span class="p">])</span>

    <span class="k">def</span> <span class="nf">delete_announcement</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">announcement_id</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">delete</span><span class="p">([</span><span class="s">&#39;announcements&#39;</span><span class="p">,</span> <span class="n">announcement_id</span><span class="p">])</span>

    <span class="k">def</span> <span class="nf">publish_announcement</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">announcement_id</span><span class="p">,</span> <span class="n">to_room_id</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">update</span><span class="p">([</span><span class="s">&#39;announcements&#39;</span><span class="p">,</span> <span class="n">announcement_id</span><span class="p">,</span> <span class="s">&#39;rooms&#39;</span><span class="p">,</span> <span class="n">to_room_id</span><span class="p">])</span>

    <span class="k">def</span> <span class="nf">upload</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">payload</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">content_length</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">content_type</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">content_encoding</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">backend</span><span class="o">.</span><span class="n">upload</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">params</span><span class="p">,</span> <span class="n">payload</span><span class="p">,</span> <span class="n">content_length</span><span class="p">,</span> <span class="n">content_type</span><span class="p">,</span> <span class="n">content_encoding</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">upload_file</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">file_obj</span><span class="p">,</span> <span class="n">file_size</span><span class="p">,</span> <span class="n">mime_type</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="o">**</span><span class="n">params</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">params</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&#39;category&#39;</span><span class="p">)</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">params</span><span class="p">[</span><span class="s">&#39;category&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s">&#39;chat&#39;</span>
        <span class="n">f</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_file</span><span class="p">(</span><span class="o">**</span><span class="n">params</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">update_file</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">url</span><span class="p">,</span> <span class="n">file_obj</span><span class="p">,</span> <span class="n">file_size</span><span class="p">,</span> <span class="n">mime_type</span><span class="p">,</span> <span class="n">encoding</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">f</span>

    <span class="k">def</span> <span class="nf">upload_file_from_path</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">file_path</span><span class="p">,</span> <span class="o">**</span><span class="n">params</span><span class="p">):</span>
        <span class="n">file_size</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">getsize</span><span class="p">(</span><span class="n">file_path</span><span class="p">)</span>
        <span class="n">mime_type</span><span class="p">,</span> <span class="n">encoding</span> <span class="o">=</span> <span class="n">mimetypes</span><span class="o">.</span><span class="n">guess_type</span><span class="p">(</span><span class="n">file_path</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">params</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&#39;type&#39;</span><span class="p">)</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">params</span><span class="p">[</span><span class="s">&#39;type&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">mime_type</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">&#39;/&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>

        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">file_path</span><span class="p">,</span> <span class="s">&#39;rb&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">file_obj</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">upload_file</span><span class="p">(</span><span class="n">file_obj</span><span class="p">,</span> <span class="n">file_size</span><span class="p">,</span> <span class="n">mime_type</span><span class="p">,</span> <span class="n">encoding</span><span class="p">,</span> <span class="o">**</span><span class="n">params</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">FranklyError</span><span class="p">(</span><span class="ne">Exception</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Instances of this class are used to represent errors that may be raised from</span>
<span class="sd">    any call to methods of the `frankly.FranklyClient` class.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">operation</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="n">status</span><span class="p">,</span> <span class="n">message</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Creates a new instance of this class.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_operation</span> <span class="o">=</span> <span class="n">operation</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_path</span>      <span class="o">=</span> <span class="n">path</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_status</span>    <span class="o">=</span> <span class="n">status</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_message</span>   <span class="o">=</span> <span class="n">message</span>

    <span class="k">def</span> <span class="nf">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s">&#39;</span><span class="si">%s</span><span class="s"> </span><span class="si">%s</span><span class="s"> [</span><span class="si">%s</span><span class="s">]: </span><span class="si">%s</span><span class="s">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_operation</span><span class="p">,</span> <span class="n">join_path</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_path</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">_status</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_message</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s">&#39;FranklyError { </span><span class="si">%s</span><span class="s"> }&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">__str__</span><span class="p">()</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">operation</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        The kind operation that generated this error, it may be one of `&#39;create&#39;`,</span>
<span class="sd">        `&#39;read&#39;`, `&#39;update&#39;`, `&#39;upload&#39;` or `&#39;delete&#39;`.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_operation</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">path</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        The path of the operation that generated this error as a list of elements</span>
<span class="sd">        representing the resource the operation was executed on.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_path</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">status</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        The status code of the error, which may be any of the</span>
<span class="sd">        [http status codes](http://en.wikipedia.org/wiki/List_of_HTTP_status_codes).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_status</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">message</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        A human-readable description of why the error happened.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_message</span>

<span class="c"># Backend</span>
<span class="c"># =======</span>
<span class="c">#</span>
<span class="c"># The Frankly API is available through multiple protocols, each of them</span>
<span class="c"># is implemented as a different backend to the FranklyClient object.</span>

<span class="k">class</span> <span class="nc">BaseBackend</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">authenticate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">app_key</span><span class="p">,</span> <span class="n">app_secret</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span>

    <span class="k">def</span> <span class="nf">create</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">payload</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span>

    <span class="k">def</span> <span class="nf">read</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">payload</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span>

    <span class="k">def</span> <span class="nf">update</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">payload</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span>

    <span class="k">def</span> <span class="nf">upload</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">payload</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">content_length</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">content_type</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">content_encoding</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span>

    <span class="k">def</span> <span class="nf">delete</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">payload</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span>

<span class="k">def</span> <span class="nf">request_wrapper</span><span class="p">(</span><span class="n">operation</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="n">f</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">_raise</span><span class="p">(</span><span class="n">code</span><span class="p">,</span> <span class="n">message</span><span class="p">):</span>
        <span class="k">raise</span> <span class="n">FranklyError</span><span class="p">(</span><span class="n">operation</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="n">code</span><span class="p">,</span> <span class="n">message</span><span class="p">)</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">f</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="k">except</span> <span class="n">RequestException</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">_raise</span><span class="p">(</span><span class="mi">500</span><span class="p">,</span> <span class="n">e</span><span class="o">.</span><span class="n">message</span><span class="p">)</span>

    <span class="k">except</span> <span class="n">ConnectionError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">_raise</span><span class="p">(</span><span class="mi">500</span><span class="p">,</span> <span class="n">e</span><span class="o">.</span><span class="n">message</span><span class="p">)</span>

    <span class="k">except</span> <span class="n">HTTPError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">_raise</span><span class="p">(</span><span class="mi">400</span><span class="p">,</span> <span class="n">e</span><span class="o">.</span><span class="n">message</span><span class="p">)</span>

    <span class="k">except</span> <span class="n">URLRequired</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">_raise</span><span class="p">(</span><span class="mi">400</span><span class="p">,</span> <span class="n">e</span><span class="o">.</span><span class="n">message</span><span class="p">)</span>

    <span class="k">except</span> <span class="n">TooManyRedirects</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">_raise</span><span class="p">(</span><span class="mi">500</span><span class="p">,</span> <span class="s">&quot;frankly servers submitted too many redirections&quot;</span><span class="p">)</span>

    <span class="k">except</span> <span class="n">ConnectTimeout</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">_raise</span><span class="p">(</span><span class="mi">408</span><span class="p">,</span> <span class="s">&quot;failed to connect the frankly servers in the allotted amount of time&quot;</span><span class="p">)</span>

    <span class="k">except</span> <span class="n">ReadTimeout</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">_raise</span><span class="p">(</span><span class="mi">408</span><span class="p">,</span> <span class="s">&quot;failed to receive a response in the allotted amount of time&quot;</span><span class="p">)</span>

    <span class="k">except</span> <span class="n">Timeout</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">_raise</span><span class="p">(</span><span class="mi">408</span><span class="p">,</span> <span class="s">&quot;failed to submit the request in the allotted amount of time&quot;</span><span class="p">)</span>

    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">_raise</span><span class="p">(</span><span class="mi">500</span><span class="p">,</span> <span class="n">e</span><span class="o">.</span><span class="n">message</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">api</span><span class="p">(</span><span class="n">f</span><span class="p">):</span>
    <span class="nd">@wraps</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">_</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="n">operation</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">__name__</span>
        <span class="n">response</span>  <span class="o">=</span> <span class="n">request_wrapper</span><span class="p">(</span><span class="n">operation</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="n">f</span><span class="p">,</span> <span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">operation</span> <span class="ow">in</span> <span class="p">(</span><span class="s">&#39;create&#39;</span><span class="p">,</span> <span class="s">&#39;read&#39;</span><span class="p">,</span> <span class="s">&#39;update&#39;</span><span class="p">):</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">content</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">(</span><span class="n">cls</span><span class="o">=</span><span class="n">JsonDecoder</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">FranklyError</span><span class="p">(</span><span class="n">operation</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="mi">500</span><span class="p">,</span> <span class="s">&quot;the server didn&#39;t respond with a JSON payload&quot;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">content</span> <span class="o">=</span> <span class="bp">None</span>

        <span class="k">if</span> <span class="n">response</span><span class="o">.</span><span class="n">status_code</span> <span class="o">&gt;=</span> <span class="mi">300</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">FranklyError</span><span class="p">(</span><span class="n">operation</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="n">response</span><span class="o">.</span><span class="n">status_code</span><span class="p">,</span> <span class="n">content</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">content</span>
    <span class="k">return</span> <span class="n">_</span>

<span class="k">class</span> <span class="nc">HttpBackend</span><span class="p">(</span><span class="n">BaseBackend</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">address</span><span class="p">,</span> <span class="n">connect_timeout</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">request_timeout</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">address</span> <span class="o">=</span> <span class="n">address</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect_timeout</span> <span class="o">=</span> <span class="n">connect_timeout</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">request_timeout</span> <span class="o">=</span> <span class="n">request_timeout</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">http</span>    <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">Session</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">http</span><span class="o">.</span><span class="n">headers</span><span class="o">.</span><span class="n">update</span><span class="p">({</span>
            <span class="s">&#39;Accept&#39;</span>       <span class="p">:</span> <span class="s">&#39;application/json&#39;</span><span class="p">,</span>
            <span class="s">&#39;Content-Type&#39;</span> <span class="p">:</span> <span class="s">&#39;application/json&#39;</span><span class="p">,</span>
        <span class="p">})</span>

    <span class="k">def</span> <span class="nf">authenticate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">app_key</span><span class="p">,</span> <span class="n">app_secret</span><span class="p">):</span>
        <span class="n">nce</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">read</span><span class="p">([</span><span class="s">&#39;auth&#39;</span><span class="p">,</span> <span class="s">&#39;nonce&#39;</span><span class="p">])</span>
        <span class="n">idt</span> <span class="o">=</span> <span class="n">generate_identity_token</span><span class="p">(</span><span class="n">app_key</span><span class="p">,</span> <span class="n">app_secret</span><span class="p">,</span> <span class="n">nce</span><span class="p">,</span> <span class="n">role</span><span class="o">=</span><span class="s">&#39;admin&#39;</span><span class="p">)</span>
        <span class="n">res</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">read</span><span class="p">([</span><span class="s">&#39;auth&#39;</span><span class="p">],</span> <span class="n">params</span><span class="o">=</span><span class="p">{</span>
            <span class="s">&#39;identity_token&#39;</span><span class="p">:</span> <span class="n">idt</span><span class="p">,</span>
        <span class="p">})</span>

        <span class="n">xsrf</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">http</span><span class="o">.</span><span class="n">cookies</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&#39;xsrf&#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">xsrf</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">http</span><span class="o">.</span><span class="n">headers</span><span class="p">[</span><span class="s">&#39;Frankly-XSRF&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">xsrf</span>

        <span class="k">return</span> <span class="n">res</span>

    <span class="k">def</span> <span class="nf">close</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">http</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

    <span class="nd">@api</span>
    <span class="k">def</span> <span class="nf">create</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">payload</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">http</span><span class="o">.</span><span class="n">post</span><span class="p">(</span>
            <span class="n">url</span>     <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">make_url</span><span class="p">(</span><span class="n">path</span><span class="p">),</span>
            <span class="n">params</span>  <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">make_params</span><span class="p">(</span><span class="n">params</span><span class="p">),</span>
            <span class="n">data</span>    <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">payload</span><span class="p">,</span> <span class="n">cls</span><span class="o">=</span><span class="n">JsonEncoder</span><span class="p">),</span>
            <span class="n">timeout</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">connect_timeout</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">request_timeout</span><span class="p">),</span>
        <span class="p">)</span>

    <span class="nd">@api</span>
    <span class="k">def</span> <span class="nf">read</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">payload</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">http</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
            <span class="n">url</span>     <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">make_url</span><span class="p">(</span><span class="n">path</span><span class="p">),</span>
            <span class="n">params</span>  <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">make_params</span><span class="p">(</span><span class="n">params</span><span class="p">),</span>
            <span class="n">timeout</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">connect_timeout</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">request_timeout</span><span class="p">),</span>
        <span class="p">)</span>

    <span class="nd">@api</span>
    <span class="k">def</span> <span class="nf">update</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">payload</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">http</span><span class="o">.</span><span class="n">put</span><span class="p">(</span>
            <span class="n">url</span>     <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">make_url</span><span class="p">(</span><span class="n">path</span><span class="p">),</span>
            <span class="n">params</span>  <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">make_params</span><span class="p">(</span><span class="n">params</span><span class="p">),</span>
            <span class="n">data</span>    <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">payload</span><span class="p">,</span> <span class="n">cls</span><span class="o">=</span><span class="n">JsonEncoder</span><span class="p">),</span>
            <span class="n">timeout</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">connect_timeout</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">request_timeout</span><span class="p">),</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="nf">upload</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">payload</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">content_length</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">content_type</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">content_encoding</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="n">headers</span> <span class="o">=</span> <span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">http</span><span class="o">.</span><span class="n">headers</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">content_length</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">headers</span><span class="p">[</span><span class="s">&#39;Content-Length&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">six</span><span class="o">.</span><span class="n">text_type</span><span class="p">(</span><span class="n">content_length</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">content_type</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">headers</span><span class="p">[</span><span class="s">&#39;Content-Type&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">six</span><span class="o">.</span><span class="n">text_type</span><span class="p">(</span><span class="n">content_type</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">content_encoding</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">headers</span><span class="p">[</span><span class="s">&#39;Content-Encoding&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">six</span><span class="o">.</span><span class="n">text_type</span><span class="p">(</span><span class="n">content_encoding</span><span class="p">)</span>

        <span class="n">operation</span> <span class="o">=</span> <span class="s">&#39;upload&#39;</span>
        <span class="n">path</span>      <span class="o">=</span> <span class="n">split_path</span><span class="p">(</span><span class="n">urlparse</span><span class="p">(</span><span class="n">url</span><span class="p">)</span><span class="o">.</span><span class="n">path</span><span class="p">)</span>
        <span class="n">response</span>  <span class="o">=</span> <span class="n">request_wrapper</span><span class="p">(</span>
            <span class="n">operation</span><span class="p">,</span>
            <span class="n">path</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">http</span><span class="o">.</span><span class="n">put</span><span class="p">,</span>
            <span class="n">url</span><span class="p">,</span>
            <span class="n">params</span>  <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">make_params</span><span class="p">(</span><span class="n">params</span><span class="p">),</span>
            <span class="n">data</span>    <span class="o">=</span> <span class="n">payload</span><span class="p">,</span>
            <span class="n">headers</span> <span class="o">=</span> <span class="n">headers</span><span class="p">,</span>
            <span class="n">timeout</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">connect_timeout</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">request_timeout</span> <span class="k">if</span> <span class="n">content_length</span> <span class="ow">is</span> <span class="bp">None</span> <span class="k">else</span> <span class="nb">max</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">request_timeout</span><span class="p">,</span> <span class="n">content_length</span> <span class="o">/</span> <span class="mi">1000</span><span class="p">)),</span>
        <span class="p">)</span>

        <span class="k">if</span> <span class="n">response</span><span class="o">.</span><span class="n">status_code</span> <span class="o">!=</span> <span class="mi">200</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">FranklyError</span><span class="p">(</span><span class="n">operation</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="n">response</span><span class="o">.</span><span class="n">status_code</span><span class="p">,</span> <span class="n">response</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>

    <span class="nd">@api</span>
    <span class="k">def</span> <span class="nf">delete</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">payload</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">http</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span>
            <span class="n">url</span>     <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">make_url</span><span class="p">(</span><span class="n">path</span><span class="p">),</span>
            <span class="n">params</span>  <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">make_params</span><span class="p">(</span><span class="n">params</span><span class="p">),</span>
            <span class="n">timeout</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">connect_timeout</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">request_timeout</span><span class="p">),</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="nf">make_url</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">):</span>
        <span class="k">return</span> <span class="s">&#39;</span><span class="si">%s%s</span><span class="s">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">address</span><span class="p">,</span> <span class="n">join_path</span><span class="p">(</span><span class="n">path</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">make_params</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">params</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">params</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="k">return</span>
        <span class="n">new_params</span> <span class="o">=</span> <span class="p">{</span> <span class="p">}</span>
        <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">six</span><span class="o">.</span><span class="n">iteritems</span><span class="p">(</span><span class="n">params</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">v</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
                <span class="k">continue</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="nb">bool</span><span class="p">):</span>
                <span class="n">v</span> <span class="o">=</span> <span class="s">&#39;true&#39;</span> <span class="k">if</span> <span class="n">v</span> <span class="k">else</span> <span class="s">&#39;false&#39;</span>
            <span class="k">elif</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="n">six</span><span class="o">.</span><span class="n">text_type</span><span class="p">):</span>
                <span class="n">v</span> <span class="o">=</span> <span class="n">six</span><span class="o">.</span><span class="n">text_type</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
            <span class="n">new_params</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="n">v</span>
        <span class="k">return</span> <span class="n">new_params</span>

<span class="c"># Utilities</span>
<span class="c"># =========</span>
<span class="c">#</span>
<span class="c"># Types and functions defined bellow this point are used as utilities to</span>
<span class="c"># implement higher-level features of the frankly module.</span>

<span class="k">class</span> <span class="nc">JsonDecoder</span><span class="p">(</span><span class="n">BaseJsonDecoder</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="n">kwargs</span><span class="p">[</span><span class="s">&#39;strict&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">False</span>
        <span class="n">kwargs</span><span class="p">[</span><span class="s">&#39;object_pairs_hook&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">ObjectDict</span>
        <span class="n">BaseJsonDecoder</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">decode</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">s</span><span class="p">):</span>
        <span class="n">obj</span> <span class="o">=</span> <span class="n">BaseJsonDecoder</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">s</span><span class="p">)</span>
        <span class="n">obj</span> <span class="o">=</span> <span class="n">json_parse_dates</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">obj</span>

<span class="k">class</span> <span class="nc">JsonEncoder</span><span class="p">(</span><span class="n">BaseJsonEncoder</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="n">kwargs</span><span class="p">[</span><span class="s">&#39;separators&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="s">&#39;,&#39;</span><span class="p">,</span> <span class="s">&#39;:&#39;</span><span class="p">)</span>
        <span class="n">BaseJsonEncoder</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">default</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">datetime</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">format_date</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="nb">set</span><span class="p">):</span>
            <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">BaseJsonEncoder</span><span class="o">.</span><span class="n">default</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">ObjectDict</span><span class="p">(</span><span class="nb">dict</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">items</span><span class="p">):</span>
        <span class="nb">dict</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">items</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__delattr__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">del</span> <span class="bp">self</span><span class="p">[</span><span class="n">name</span><span class="p">]</span>
        <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">AttributeError</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__getattr__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="p">[</span><span class="n">name</span><span class="p">]</span>
        <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">AttributeError</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__setattr__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="bp">self</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>

    <span class="k">def</span> <span class="nf">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">cls</span><span class="o">=</span><span class="n">JsonEncoder</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">json_parse_dates</span><span class="p">(</span><span class="n">obj</span><span class="p">):</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">six</span><span class="o">.</span><span class="n">text_type</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">parse_date</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">obj</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">json_parse_dates</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">obj</span><span class="p">]</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">type</span><span class="p">(</span><span class="n">obj</span><span class="p">)((</span><span class="n">k</span><span class="p">,</span> <span class="n">json_parse_dates</span><span class="p">(</span><span class="n">v</span><span class="p">))</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">six</span><span class="o">.</span><span class="n">iteritems</span><span class="p">(</span><span class="n">obj</span><span class="p">))</span>

    <span class="k">return</span> <span class="n">obj</span>

<span class="k">def</span> <span class="nf">format_date</span><span class="p">(</span><span class="n">d</span><span class="p">):</span>
    <span class="n">tz</span> <span class="o">=</span> <span class="n">d</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s">&#39;%z&#39;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">tz</span> <span class="ow">in</span> <span class="p">(</span><span class="s">&#39;&#39;</span><span class="p">,</span> <span class="s">&#39;+0000&#39;</span><span class="p">):</span>
        <span class="n">tz</span> <span class="o">=</span> <span class="s">&#39;Z&#39;</span>
    <span class="k">return</span> <span class="s">&#39;</span><span class="si">%04d</span><span class="s">-</span><span class="si">%02d</span><span class="s">-</span><span class="si">%02d</span><span class="s">T</span><span class="si">%02d</span><span class="s">:</span><span class="si">%02d</span><span class="s">:</span><span class="si">%02d</span><span class="s">.</span><span class="si">%03d%s</span><span class="s">&#39;</span> <span class="o">%</span> <span class="p">(</span>
        <span class="n">d</span><span class="o">.</span><span class="n">year</span><span class="p">,</span>
        <span class="n">d</span><span class="o">.</span><span class="n">month</span><span class="p">,</span>
        <span class="n">d</span><span class="o">.</span><span class="n">day</span><span class="p">,</span>
        <span class="n">d</span><span class="o">.</span><span class="n">hour</span><span class="p">,</span>
        <span class="n">d</span><span class="o">.</span><span class="n">minute</span><span class="p">,</span>
        <span class="n">d</span><span class="o">.</span><span class="n">second</span><span class="p">,</span>
        <span class="n">d</span><span class="o">.</span><span class="n">microsecond</span> <span class="o">/</span> <span class="mi">1000</span><span class="p">,</span>
        <span class="n">tz</span><span class="p">,</span>
    <span class="p">)</span>

<span class="k">def</span> <span class="nf">join_path</span><span class="p">(</span><span class="n">p</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">normpath</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s">&#39;/&#39;</span><span class="p">,</span> <span class="o">*</span><span class="p">[</span><span class="n">six</span><span class="o">.</span><span class="n">text_type</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">p</span><span class="p">]))</span>

<span class="k">def</span> <span class="nf">split_path</span><span class="p">(</span><span class="n">p</span><span class="p">):</span>
    <span class="k">return</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">p</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">&#39;/&#39;</span><span class="p">)</span> <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">]</span>
</pre></div>

  </div>

  </header>

  <section id="section-items">

    <h2 class="section-title" id="header-functions">Functions</h2>
      
  <div class="item">
    <div class="name def" id="frankly.generate_identity_token">
    <p>def <span class="ident">generate_identity_token</span>(</p><p>app_key, app_secret, nonce, user_id=None, role=None)</p>
    </div>
    

    
  
    <div class="desc"><p>This function generates an identity token suitable for a signle
authentication attempt of a client against the Frankly API or SDK.</p>
<p><strong>Arguments</strong></p>
<ul>
<li>
<p><code>app_key (str)</code><br />
The key that specifies which app this client is authenticating for, this
value is provided by the Frankly Console.</p>
</li>
<li>
<p><code>app_secret (str)</code><br />
The secret value associated the the key allowing the client to securely
authenticate against the Frankly API.</p>
</li>
<li>
<p><code>nonce (str)</code><br />
The nonce value got from Frankly SDK or API whether the identity generation
comes from an client device or app backend.</p>
</li>
<li>
<p><code>user_id (object)</code><br />
This argument must be set to make the SDK operate on behalf of a specific
user of the app.<br />
For backend services willing to interact with the API directly this may be
omitted.</p>
</li>
<li>
<p><code>role (str)</code><br />
For backend services using the Frankly API this can be set to <code>'admin'</code> to
generate a token allowing the client to get admin priviledges and perform
operations that regular users are forbidden to.</p>
</li>
</ul>
<p><strong>Return</strong></p>
<p>The function returns the generated identity token as a string.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-frankly.generate_identity_token', this);">Show source &equiv;</a></p>
  <div id="source-frankly.generate_identity_token" class="source">
    <div class="codehilite"><pre><span class="k">def</span> <span class="nf">generate_identity_token</span><span class="p">(</span><span class="n">app_key</span><span class="p">,</span> <span class="n">app_secret</span><span class="p">,</span> <span class="n">nonce</span><span class="p">,</span> <span class="n">user_id</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">role</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    This function generates an identity token suitable for a signle</span>
<span class="sd">    authentication attempt of a client against the Frankly API or SDK.</span>

<span class="sd">    **Arguments**</span>

<span class="sd">    - `app_key (str)`  </span>
<span class="sd">    The key that specifies which app this client is authenticating for, this</span>
<span class="sd">    value is provided by the Frankly Console.</span>

<span class="sd">    - `app_secret (str)`  </span>
<span class="sd">    The secret value associated the the key allowing the client to securely</span>
<span class="sd">    authenticate against the Frankly API.</span>

<span class="sd">    - `nonce (str)`  </span>
<span class="sd">    The nonce value got from Frankly SDK or API whether the identity generation</span>
<span class="sd">    comes from an client device or app backend.</span>

<span class="sd">    - `user_id (object)`  </span>
<span class="sd">    This argument must be set to make the SDK operate on behalf of a specific</span>
<span class="sd">    user of the app.  </span>
<span class="sd">    For backend services willing to interact with the API directly this may be</span>
<span class="sd">    omitted.</span>

<span class="sd">    - `role (str)`  </span>
<span class="sd">    For backend services using the Frankly API this can be set to `&#39;admin&#39;` to</span>
<span class="sd">    generate a token allowing the client to get admin priviledges and perform</span>
<span class="sd">    operations that regular users are forbidden to.</span>

<span class="sd">    **Return**</span>

<span class="sd">    The function returns the generated identity token as a string.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">now</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">())</span>
    <span class="n">tok</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s">&#39;aak&#39;</span><span class="p">:</span> <span class="n">app_key</span><span class="p">,</span>
        <span class="s">&#39;iat&#39;</span><span class="p">:</span> <span class="n">now</span><span class="p">,</span>
        <span class="s">&#39;exp&#39;</span><span class="p">:</span> <span class="n">now</span> <span class="o">+</span> <span class="mi">864000</span><span class="p">,</span>
        <span class="s">&#39;nce&#39;</span><span class="p">:</span> <span class="n">nonce</span><span class="p">,</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="n">user_id</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">tok</span><span class="p">[</span><span class="s">&#39;uid&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">user_id</span>

    <span class="k">if</span> <span class="n">role</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">tok</span><span class="p">[</span><span class="s">&#39;role&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">role</span>

    <span class="n">idt</span> <span class="o">=</span> <span class="n">jwt</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="n">tok</span><span class="p">,</span> <span class="n">app_secret</span><span class="p">,</span> <span class="n">algorithm</span><span class="o">=</span><span class="s">&#39;HS256&#39;</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="p">{</span>
        <span class="s">&#39;typ&#39;</span><span class="p">:</span> <span class="s">&#39;JWS&#39;</span><span class="p">,</span>
        <span class="s">&#39;cty&#39;</span><span class="p">:</span> <span class="s">&#39;frankly-it;v1&#39;</span><span class="p">,</span>
    <span class="p">})</span>

    <span class="k">return</span> <span class="n">six</span><span class="o">.</span><span class="n">text_type</span><span class="p">(</span><span class="n">idt</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s">&#39;utf-8&#39;</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  

    <h2 class="section-title" id="header-classes">Classes</h2>
      
      <div class="item">
      <p id="frankly.FranklyClient" class="name">class <span class="ident">FranklyClient</span></p>
      
  
    <div class="desc"><p>This class provides the implementation of a network client that exposes
operations available on the Frankly API to a python application.</p>
<p>A typical work flow is to create an instance of FranklyClient, using it
to authenticate and then make method calls to interact with the API.<br />
Reusing the same client instance multiple times allow the application to
avoid wasting time re-authenticating before every operation.</p>
<p>An application can create multiple instances of this class and authenticate
with the same or different pairs of <code>app_key</code> and <code>app_secret</code>, each instance
is independant from the other ones.</p>
<p>Each instance of FranklyClient maintains its own connection pool to Frankly
servers, if client is not required anymore the application should call the
<code>close</code> method to release system resources.<br />
A client should not be used anymore after being closed.<br />
Note that instances of FranklyClient can be used as context managers to
automatically be closed when exiting the <code>with</code> statement.</p>
<p><strong>[thread safety]</strong><br />
Python application using threads or libraries like <a href="http://www.gevent.org/">gevent</a>
can share instances of FranklyClient between multiple threads/coroutines
only after sucessfuly authenticating.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-frankly.FranklyClient', this);">Show source &equiv;</a></p>
  <div id="source-frankly.FranklyClient" class="source">
    <div class="codehilite"><pre><span class="k">class</span> <span class="nc">FranklyClient</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    This class provides the implementation of a network client that exposes</span>
<span class="sd">    operations available on the Frankly API to a python application.</span>

<span class="sd">    A typical work flow is to create an instance of FranklyClient, using it</span>
<span class="sd">    to authenticate and then make method calls to interact with the API.  </span>
<span class="sd">    Reusing the same client instance multiple times allow the application to</span>
<span class="sd">    avoid wasting time re-authenticating before every operation.</span>

<span class="sd">    An application can create multiple instances of this class and authenticate</span>
<span class="sd">    with the same or different pairs of `app_key` and `app_secret`, each instance</span>
<span class="sd">    is independant from the other ones.</span>

<span class="sd">    Each instance of FranklyClient maintains its own connection pool to Frankly</span>
<span class="sd">    servers, if client is not required anymore the application should call the</span>
<span class="sd">    `close` method to release system resources.  </span>
<span class="sd">    A client should not be used anymore after being closed.  </span>
<span class="sd">    Note that instances of FranklyClient can be used as context managers to</span>
<span class="sd">    automatically be closed when exiting the `with` statement.</span>

<span class="sd">    **[thread safety]**  </span>
<span class="sd">    Python application using threads or libraries like [gevent](http://www.gevent.org/)</span>
<span class="sd">    can share instances of FranklyClient between multiple threads/coroutines</span>
<span class="sd">    only after sucessfuly authenticating.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">address</span><span class="o">=</span><span class="s">&#39;https://app.franklychat.com&#39;</span><span class="p">,</span> <span class="n">connect_timeout</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">request_timeout</span><span class="o">=</span><span class="mi">5</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Creates a new instance of this class.</span>

<span class="sd">        **Arguments**</span>

<span class="sd">        - `address (str)`  </span>
<span class="sd">        The URL at which Frankly servers can be reached, it&#39;s very unlikely that</span>
<span class="sd">        an application would need to change this value.</span>

<span class="sd">        - `connect_timeout (int or float)`  </span>
<span class="sd">        The maximum amount of time connecting to the API can take.</span>

<span class="sd">        - `request_timeout (int or float)`  </span>
<span class="sd">        The maximum amount of time submitting a request and receiving a response</span>
<span class="sd">        from the API can take.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">address</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span> <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">address</span><span class="p">,</span> <span class="n">six</span><span class="o">.</span><span class="n">text_type</span><span class="p">)):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s">&quot;address must be a string&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">connect_timeout</span><span class="p">,</span> <span class="nb">int</span><span class="p">)</span> <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">connect_timeout</span><span class="p">,</span> <span class="nb">float</span><span class="p">)):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s">&quot;connect timeout must be a int or float&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">request_timeout</span><span class="p">,</span> <span class="nb">int</span><span class="p">)</span> <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">request_timeout</span><span class="p">,</span> <span class="nb">float</span><span class="p">)):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s">&quot;request timeout must be a int or float&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">connect_timeout</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s">&quot;connect timeout must be a positive value&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">request_timeout</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s">&quot;request timeout must be a positive value&quot;</span><span class="p">)</span>

        <span class="n">url</span> <span class="o">=</span> <span class="n">urlparse</span><span class="p">(</span><span class="n">address</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">url</span><span class="o">.</span><span class="n">scheme</span> <span class="ow">in</span> <span class="p">(</span><span class="s">&#39;http&#39;</span><span class="p">,</span> <span class="s">&#39;https&#39;</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">backend</span> <span class="o">=</span> <span class="n">HttpBackend</span><span class="p">(</span>
                <span class="n">address</span><span class="p">,</span>
                <span class="n">connect_timeout</span> <span class="o">=</span> <span class="n">connect_timeout</span><span class="p">,</span>
                <span class="n">request_timeout</span> <span class="o">=</span> <span class="n">request_timeout</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">address</span> <span class="o">+</span> <span class="s">&quot; is not accessible through a supported protocol&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__enter__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span>

    <span class="k">def</span> <span class="nf">__exit__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">authenticate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">app_key</span><span class="p">,</span> <span class="n">app_secret</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        This should be the first method called on an instance of FranklyClient,</span>
<span class="sd">        after succesfully returning the client can be used to interact with the</span>
<span class="sd">        Frankly API.</span>

<span class="sd">        **Arguments**</span>

<span class="sd">        - `app_key (str)`  </span>
<span class="sd">        The key that specifies which app this client is authenticating for, this</span>
<span class="sd">        value is provided by the Frankly Console.</span>

<span class="sd">        - `app_secret (str)`  </span>
<span class="sd">        The secret value associated the the key allowing the client to securely</span>
<span class="sd">        authenticate against the Frankly API.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">backend</span><span class="o">.</span><span class="n">authenticate</span><span class="p">(</span><span class="n">app_key</span><span class="p">,</span> <span class="n">app_secret</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">close</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Shuts down all connections and releases system resources held by this</span>
<span class="sd">        client object.  </span>
<span class="sd">        The instance should not be used anymore after calling this method.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">backend</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">create</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">payload</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        This method exposes a generic interface for creating objects through</span>
<span class="sd">        the Frankly API.  </span>
<span class="sd">        Every `create_*` method is implemented on top of this one.</span>

<span class="sd">        **Arguments**</span>

<span class="sd">        - `path (list)`  </span>
<span class="sd">        A list of values representing the collection to create an object in.</span>

<span class="sd">        - `params (dict)`  </span>
<span class="sd">        Parameters passed as part of the request.</span>

<span class="sd">        - `payload (dict)`  </span>
<span class="sd">        Dict-like object representing the object to create.</span>

<span class="sd">        **Return**</span>

<span class="sd">        The method returns an object representing the newly created object.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">backend</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">params</span><span class="p">,</span> <span class="n">payload</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">create_announcement</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">payload</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Creates a new announcement object in the app.  </span>
<span class="sd">        The properties of that new announcement are given as keyword arguments</span>
<span class="sd">        to the method.</span>

<span class="sd">        **Arguments**</span>

<span class="sd">        - `contents (list)`  </span>
<span class="sd">        A list of content objects representing what will be embedded into the</span>
<span class="sd">        messages once the announcement is published to one or more rooms.  </span>
<span class="sd">        Refer to the *Announcement* and *Message* sections of the docuementation</span>
<span class="sd">        for more details about content objects.</span>

<span class="sd">        - `contextual (bool)`  </span>
<span class="sd">        Whether the announcement should be published as a contextual or regular</span>
<span class="sd">        messages.</span>

<span class="sd">        **Return**</span>

<span class="sd">        The method returns an object representing the newly created announcement.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">create</span><span class="p">([</span><span class="s">&#39;announcements&#39;</span><span class="p">],</span> <span class="n">payload</span><span class="o">=</span><span class="n">payload</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">create_file</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">payload</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Creates a new file object on Frankly servers and returns that object.  </span>
<span class="sd">        The properties of that new file are given as keyword argumenst to the</span>
<span class="sd">        method.</span>

<span class="sd">        **Arguments**</span>

<span class="sd">        - `category (str)`  </span>
<span class="sd">        One of the file categories supported by the API (see the *File* section</span>
<span class="sd">        of the documentation).</span>

<span class="sd">        - `type (str)`  </span>
<span class="sd">        One of the file types supported by the API (see the *File* section of</span>
<span class="sd">        the documentation).</span>

<span class="sd">        **Return**</span>

<span class="sd">        The method returns an object representing the newly created file.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">create</span><span class="p">([</span><span class="s">&#39;files&#39;</span><span class="p">],</span> <span class="n">params</span><span class="o">=</span><span class="n">payload</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">create_room</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">payload</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Creates a new room object in the app and return that object.  </span>
<span class="sd">        The properties of that new room are given as keyword arguments to the</span>
<span class="sd">        method.</span>

<span class="sd">        **Arguments**</span>

<span class="sd">        - `title (str)`  </span>
<span class="sd">        The title associated to this room.</span>

<span class="sd">        - `status (str)`  </span>
<span class="sd">        One of `&#39;unpublished&#39;`, `&#39;active&#39;` or `&#39;inactive&#39;`.</span>

<span class="sd">        - `description (str)`  </span>
<span class="sd">        A description of what this chat room is intended for, it is usually a</span>
<span class="sd">        short description of topics that are discussed by participants.</span>

<span class="sd">        - `avatar_image_url (str)`  </span>
<span class="sd">        The URL of an image to use when the room is displayed in one of the</span>
<span class="sd">        mobile or web apps embedding a Frankly SDK.</span>

<span class="sd">        - `featured_image_url (str)`  </span>
<span class="sd">        The URL of an image to use when the room is featured in one of the</span>
<span class="sd">        mobile or web apps embedding a Frankly SDK.</span>

<span class="sd">        - `featured (bool)`  </span>
<span class="sd">        Whether the room should be featured in the mobile or web apps embedding</span>
<span class="sd">        a Frankly SDK.</span>

<span class="sd">        **Return**</span>

<span class="sd">        The method returns an object representing the newly created room.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">create</span><span class="p">([</span><span class="s">&#39;rooms&#39;</span><span class="p">],</span> <span class="n">payload</span><span class="o">=</span><span class="n">payload</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">create_room_message</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">room_id</span><span class="p">,</span> <span class="o">**</span><span class="n">payload</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Creates a new message object in the room with id specified as first</span>
<span class="sd">        argument.  </span>
<span class="sd">        The properties of that new message are given as keyword arguments to the</span>
<span class="sd">        method.</span>

<span class="sd">        **Arguments**</span>

<span class="sd">        - `contents (list)`  </span>
<span class="sd">        A list of content objects representing what will be embedded into the</span>
<span class="sd">        messages once the announcement is published to one or more rooms.  </span>
<span class="sd">        Refer to the *Announcement* and *Message* sections of the docuementation</span>
<span class="sd">        for more details about content objects.</span>

<span class="sd">        **Return**</span>

<span class="sd">        The method returns an object representing the newly created message.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">create</span><span class="p">([</span><span class="s">&#39;rooms&#39;</span><span class="p">,</span> <span class="n">room_id</span><span class="p">,</span> <span class="s">&#39;messages&#39;</span><span class="p">],</span> <span class="n">payload</span><span class="o">=</span><span class="n">payload</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">read</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">payload</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">backend</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">params</span><span class="p">,</span> <span class="n">payload</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">read_room</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">room_id</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">read</span><span class="p">([</span><span class="s">&#39;rooms&#39;</span><span class="p">,</span> <span class="n">room_id</span><span class="p">])</span>

    <span class="k">def</span> <span class="nf">read_room_list</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">read</span><span class="p">([</span><span class="s">&#39;rooms&#39;</span><span class="p">])</span>

    <span class="k">def</span> <span class="nf">read_room_message_list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">room_id</span><span class="p">,</span> <span class="o">**</span><span class="n">params</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">read</span><span class="p">([</span><span class="s">&#39;rooms&#39;</span><span class="p">,</span> <span class="n">room_id</span><span class="p">,</span> <span class="s">&#39;messages&#39;</span><span class="p">],</span> <span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">read_announcement</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">announcement_id</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">read</span><span class="p">([</span><span class="s">&#39;announcements&#39;</span><span class="p">,</span> <span class="n">announcement_id</span><span class="p">])</span>

    <span class="k">def</span> <span class="nf">read_announcement_list</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">read</span><span class="p">([</span><span class="s">&#39;announcements&#39;</span><span class="p">])</span>

    <span class="k">def</span> <span class="nf">read_announcement_room_list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">announcement_id</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">read</span><span class="p">([</span><span class="s">&#39;announcements&#39;</span><span class="p">,</span> <span class="n">announcement_id</span><span class="p">,</span> <span class="s">&#39;rooms&#39;</span><span class="p">])</span>

    <span class="k">def</span> <span class="nf">update</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">payload</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">backend</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">params</span><span class="p">,</span> <span class="n">payload</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">update_room</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">room_id</span><span class="p">,</span> <span class="o">**</span><span class="n">payload</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">update</span><span class="p">([</span><span class="s">&#39;rooms&#39;</span><span class="p">,</span> <span class="n">room_id</span><span class="p">],</span> <span class="n">payload</span><span class="o">=</span><span class="n">payload</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">update_file</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="n">file_obj</span><span class="p">,</span> <span class="n">file_size</span><span class="p">,</span> <span class="n">mime_type</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">upload</span><span class="p">(</span>
            <span class="n">url</span><span class="p">,</span>
            <span class="n">payload</span>          <span class="o">=</span> <span class="n">file_obj</span><span class="p">,</span>
            <span class="n">content_length</span>   <span class="o">=</span> <span class="n">file_size</span><span class="p">,</span>
            <span class="n">content_type</span>     <span class="o">=</span> <span class="n">mime_type</span><span class="p">,</span>
            <span class="n">content_encoding</span> <span class="o">=</span> <span class="n">encoding</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="nf">update_file_from_path</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="n">file_path</span><span class="p">):</span>
        <span class="n">file_size</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">getsize</span><span class="p">(</span><span class="n">file_path</span><span class="p">)</span>
        <span class="n">mime_type</span><span class="p">,</span> <span class="n">encoding</span> <span class="o">=</span> <span class="n">mimetypes</span><span class="o">.</span><span class="n">guess_type</span><span class="p">(</span><span class="n">file_path</span><span class="p">)</span>

        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">file_path</span><span class="p">,</span> <span class="s">&#39;rb&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">file_obj</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">update_file</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">file_obj</span><span class="p">,</span> <span class="n">file_size</span><span class="p">,</span> <span class="n">mime_type</span><span class="p">,</span> <span class="n">encoding</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">delete</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">payload</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">backend</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">params</span><span class="p">,</span> <span class="n">payload</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">delete_room</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">room_id</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">delete</span><span class="p">([</span><span class="s">&#39;rooms&#39;</span><span class="p">,</span> <span class="n">room_id</span><span class="p">])</span>

    <span class="k">def</span> <span class="nf">delete_announcement</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">announcement_id</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">delete</span><span class="p">([</span><span class="s">&#39;announcements&#39;</span><span class="p">,</span> <span class="n">announcement_id</span><span class="p">])</span>

    <span class="k">def</span> <span class="nf">publish_announcement</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">announcement_id</span><span class="p">,</span> <span class="n">to_room_id</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">update</span><span class="p">([</span><span class="s">&#39;announcements&#39;</span><span class="p">,</span> <span class="n">announcement_id</span><span class="p">,</span> <span class="s">&#39;rooms&#39;</span><span class="p">,</span> <span class="n">to_room_id</span><span class="p">])</span>

    <span class="k">def</span> <span class="nf">upload</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">payload</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">content_length</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">content_type</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">content_encoding</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">backend</span><span class="o">.</span><span class="n">upload</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">params</span><span class="p">,</span> <span class="n">payload</span><span class="p">,</span> <span class="n">content_length</span><span class="p">,</span> <span class="n">content_type</span><span class="p">,</span> <span class="n">content_encoding</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">upload_file</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">file_obj</span><span class="p">,</span> <span class="n">file_size</span><span class="p">,</span> <span class="n">mime_type</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="o">**</span><span class="n">params</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">params</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&#39;category&#39;</span><span class="p">)</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">params</span><span class="p">[</span><span class="s">&#39;category&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s">&#39;chat&#39;</span>
        <span class="n">f</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_file</span><span class="p">(</span><span class="o">**</span><span class="n">params</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">update_file</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">url</span><span class="p">,</span> <span class="n">file_obj</span><span class="p">,</span> <span class="n">file_size</span><span class="p">,</span> <span class="n">mime_type</span><span class="p">,</span> <span class="n">encoding</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">f</span>

    <span class="k">def</span> <span class="nf">upload_file_from_path</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">file_path</span><span class="p">,</span> <span class="o">**</span><span class="n">params</span><span class="p">):</span>
        <span class="n">file_size</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">getsize</span><span class="p">(</span><span class="n">file_path</span><span class="p">)</span>
        <span class="n">mime_type</span><span class="p">,</span> <span class="n">encoding</span> <span class="o">=</span> <span class="n">mimetypes</span><span class="o">.</span><span class="n">guess_type</span><span class="p">(</span><span class="n">file_path</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">params</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&#39;type&#39;</span><span class="p">)</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">params</span><span class="p">[</span><span class="s">&#39;type&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">mime_type</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">&#39;/&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>

        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">file_path</span><span class="p">,</span> <span class="s">&#39;rb&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">file_obj</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">upload_file</span><span class="p">(</span><span class="n">file_obj</span><span class="p">,</span> <span class="n">file_size</span><span class="p">,</span> <span class="n">mime_type</span><span class="p">,</span> <span class="n">encoding</span><span class="p">,</span> <span class="o">**</span><span class="n">params</span><span class="p">)</span>
</pre></div>

  </div>
</div>


      <div class="class">
          <h3>Ancestors (in MRO)</h3>
          <ul class="class_list">
          <li><a href="#frankly.FranklyClient">FranklyClient</a></li>
          <li><a href="/__builtin__.object.ext">__builtin__.object</a></li>
          </ul>
          <h3>Methods</h3>
            
  <div class="item">
    <div class="name def" id="frankly.FranklyClient.__init__">
    <p>def <span class="ident">__init__</span>(</p><p>self, address=u&#39;https://app.franklychat.com&#39;, connect_timeout=5, request_timeout=5)</p>
    </div>
    

    
  
    <div class="desc"><p>Creates a new instance of this class.</p>
<p><strong>Arguments</strong></p>
<ul>
<li>
<p><code>address (str)</code><br />
The URL at which Frankly servers can be reached, it's very unlikely that
an application would need to change this value.</p>
</li>
<li>
<p><code>connect_timeout (int or float)</code><br />
The maximum amount of time connecting to the API can take.</p>
</li>
<li>
<p><code>request_timeout (int or float)</code><br />
The maximum amount of time submitting a request and receiving a response
from the API can take.</p>
</li>
</ul></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-frankly.FranklyClient.__init__', this);">Show source &equiv;</a></p>
  <div id="source-frankly.FranklyClient.__init__" class="source">
    <div class="codehilite"><pre><span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">address</span><span class="o">=</span><span class="s">&#39;https://app.franklychat.com&#39;</span><span class="p">,</span> <span class="n">connect_timeout</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">request_timeout</span><span class="o">=</span><span class="mi">5</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Creates a new instance of this class.</span>
<span class="sd">    **Arguments**</span>
<span class="sd">    - `address (str)`  </span>
<span class="sd">    The URL at which Frankly servers can be reached, it&#39;s very unlikely that</span>
<span class="sd">    an application would need to change this value.</span>
<span class="sd">    - `connect_timeout (int or float)`  </span>
<span class="sd">    The maximum amount of time connecting to the API can take.</span>
<span class="sd">    - `request_timeout (int or float)`  </span>
<span class="sd">    The maximum amount of time submitting a request and receiving a response</span>
<span class="sd">    from the API can take.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">address</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span> <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">address</span><span class="p">,</span> <span class="n">six</span><span class="o">.</span><span class="n">text_type</span><span class="p">)):</span>
        <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s">&quot;address must be a string&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">connect_timeout</span><span class="p">,</span> <span class="nb">int</span><span class="p">)</span> <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">connect_timeout</span><span class="p">,</span> <span class="nb">float</span><span class="p">)):</span>
        <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s">&quot;connect timeout must be a int or float&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">request_timeout</span><span class="p">,</span> <span class="nb">int</span><span class="p">)</span> <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">request_timeout</span><span class="p">,</span> <span class="nb">float</span><span class="p">)):</span>
        <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s">&quot;request timeout must be a int or float&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">connect_timeout</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s">&quot;connect timeout must be a positive value&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">request_timeout</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s">&quot;request timeout must be a positive value&quot;</span><span class="p">)</span>
    <span class="n">url</span> <span class="o">=</span> <span class="n">urlparse</span><span class="p">(</span><span class="n">address</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">url</span><span class="o">.</span><span class="n">scheme</span> <span class="ow">in</span> <span class="p">(</span><span class="s">&#39;http&#39;</span><span class="p">,</span> <span class="s">&#39;https&#39;</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">backend</span> <span class="o">=</span> <span class="n">HttpBackend</span><span class="p">(</span>
            <span class="n">address</span><span class="p">,</span>
            <span class="n">connect_timeout</span> <span class="o">=</span> <span class="n">connect_timeout</span><span class="p">,</span>
            <span class="n">request_timeout</span> <span class="o">=</span> <span class="n">request_timeout</span><span class="p">,</span>
        <span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">address</span> <span class="o">+</span> <span class="s">&quot; is not accessible through a supported protocol&quot;</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="frankly.FranklyClient.authenticate">
    <p>def <span class="ident">authenticate</span>(</p><p>self, app_key, app_secret)</p>
    </div>
    

    
  
    <div class="desc"><p>This should be the first method called on an instance of FranklyClient,
after succesfully returning the client can be used to interact with the
Frankly API.</p>
<p><strong>Arguments</strong></p>
<ul>
<li>
<p><code>app_key (str)</code><br />
The key that specifies which app this client is authenticating for, this
value is provided by the Frankly Console.</p>
</li>
<li>
<p><code>app_secret (str)</code><br />
The secret value associated the the key allowing the client to securely
authenticate against the Frankly API.</p>
</li>
</ul></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-frankly.FranklyClient.authenticate', this);">Show source &equiv;</a></p>
  <div id="source-frankly.FranklyClient.authenticate" class="source">
    <div class="codehilite"><pre><span class="k">def</span> <span class="nf">authenticate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">app_key</span><span class="p">,</span> <span class="n">app_secret</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    This should be the first method called on an instance of FranklyClient,</span>
<span class="sd">    after succesfully returning the client can be used to interact with the</span>
<span class="sd">    Frankly API.</span>
<span class="sd">    **Arguments**</span>
<span class="sd">    - `app_key (str)`  </span>
<span class="sd">    The key that specifies which app this client is authenticating for, this</span>
<span class="sd">    value is provided by the Frankly Console.</span>
<span class="sd">    - `app_secret (str)`  </span>
<span class="sd">    The secret value associated the the key allowing the client to securely</span>
<span class="sd">    authenticate against the Frankly API.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">backend</span><span class="o">.</span><span class="n">authenticate</span><span class="p">(</span><span class="n">app_key</span><span class="p">,</span> <span class="n">app_secret</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="frankly.FranklyClient.close">
    <p>def <span class="ident">close</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Shuts down all connections and releases system resources held by this
client object.<br />
The instance should not be used anymore after calling this method.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-frankly.FranklyClient.close', this);">Show source &equiv;</a></p>
  <div id="source-frankly.FranklyClient.close" class="source">
    <div class="codehilite"><pre><span class="k">def</span> <span class="nf">close</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Shuts down all connections and releases system resources held by this</span>
<span class="sd">    client object.  </span>
<span class="sd">    The instance should not be used anymore after calling this method.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">backend</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="frankly.FranklyClient.create">
    <p>def <span class="ident">create</span>(</p><p>self, path, params=None, payload=None)</p>
    </div>
    

    
  
    <div class="desc"><p>This method exposes a generic interface for creating objects through
the Frankly API.<br />
Every <code>create_*</code> method is implemented on top of this one.</p>
<p><strong>Arguments</strong></p>
<ul>
<li>
<p><code>path (list)</code><br />
A list of values representing the collection to create an object in.</p>
</li>
<li>
<p><code>params (dict)</code><br />
Parameters passed as part of the request.</p>
</li>
<li>
<p><code>payload (dict)</code><br />
Dict-like object representing the object to create.</p>
</li>
</ul>
<p><strong>Return</strong></p>
<p>The method returns an object representing the newly created object.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-frankly.FranklyClient.create', this);">Show source &equiv;</a></p>
  <div id="source-frankly.FranklyClient.create" class="source">
    <div class="codehilite"><pre><span class="k">def</span> <span class="nf">create</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">payload</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    This method exposes a generic interface for creating objects through</span>
<span class="sd">    the Frankly API.  </span>
<span class="sd">    Every `create_*` method is implemented on top of this one.</span>
<span class="sd">    **Arguments**</span>
<span class="sd">    - `path (list)`  </span>
<span class="sd">    A list of values representing the collection to create an object in.</span>
<span class="sd">    - `params (dict)`  </span>
<span class="sd">    Parameters passed as part of the request.</span>
<span class="sd">    - `payload (dict)`  </span>
<span class="sd">    Dict-like object representing the object to create.</span>
<span class="sd">    **Return**</span>
<span class="sd">    The method returns an object representing the newly created object.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">backend</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">params</span><span class="p">,</span> <span class="n">payload</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="frankly.FranklyClient.create_announcement">
    <p>def <span class="ident">create_announcement</span>(</p><p>self, **payload)</p>
    </div>
    

    
  
    <div class="desc"><p>Creates a new announcement object in the app.<br />
The properties of that new announcement are given as keyword arguments
to the method.</p>
<p><strong>Arguments</strong></p>
<ul>
<li>
<p><code>contents (list)</code><br />
A list of content objects representing what will be embedded into the
messages once the announcement is published to one or more rooms.<br />
Refer to the <em>Announcement</em> and <em>Message</em> sections of the docuementation
for more details about content objects.</p>
</li>
<li>
<p><code>contextual (bool)</code><br />
Whether the announcement should be published as a contextual or regular
messages.</p>
</li>
</ul>
<p><strong>Return</strong></p>
<p>The method returns an object representing the newly created announcement.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-frankly.FranklyClient.create_announcement', this);">Show source &equiv;</a></p>
  <div id="source-frankly.FranklyClient.create_announcement" class="source">
    <div class="codehilite"><pre><span class="k">def</span> <span class="nf">create_announcement</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">payload</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Creates a new announcement object in the app.  </span>
<span class="sd">    The properties of that new announcement are given as keyword arguments</span>
<span class="sd">    to the method.</span>
<span class="sd">    **Arguments**</span>
<span class="sd">    - `contents (list)`  </span>
<span class="sd">    A list of content objects representing what will be embedded into the</span>
<span class="sd">    messages once the announcement is published to one or more rooms.  </span>
<span class="sd">    Refer to the *Announcement* and *Message* sections of the docuementation</span>
<span class="sd">    for more details about content objects.</span>
<span class="sd">    - `contextual (bool)`  </span>
<span class="sd">    Whether the announcement should be published as a contextual or regular</span>
<span class="sd">    messages.</span>
<span class="sd">    **Return**</span>
<span class="sd">    The method returns an object representing the newly created announcement.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">create</span><span class="p">([</span><span class="s">&#39;announcements&#39;</span><span class="p">],</span> <span class="n">payload</span><span class="o">=</span><span class="n">payload</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="frankly.FranklyClient.create_file">
    <p>def <span class="ident">create_file</span>(</p><p>self, **payload)</p>
    </div>
    

    
  
    <div class="desc"><p>Creates a new file object on Frankly servers and returns that object.<br />
The properties of that new file are given as keyword argumenst to the
method.</p>
<p><strong>Arguments</strong></p>
<ul>
<li>
<p><code>category (str)</code><br />
One of the file categories supported by the API (see the <em>File</em> section
of the documentation).</p>
</li>
<li>
<p><code>type (str)</code><br />
One of the file types supported by the API (see the <em>File</em> section of
the documentation).</p>
</li>
</ul>
<p><strong>Return</strong></p>
<p>The method returns an object representing the newly created file.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-frankly.FranklyClient.create_file', this);">Show source &equiv;</a></p>
  <div id="source-frankly.FranklyClient.create_file" class="source">
    <div class="codehilite"><pre><span class="k">def</span> <span class="nf">create_file</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">payload</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Creates a new file object on Frankly servers and returns that object.  </span>
<span class="sd">    The properties of that new file are given as keyword argumenst to the</span>
<span class="sd">    method.</span>
<span class="sd">    **Arguments**</span>
<span class="sd">    - `category (str)`  </span>
<span class="sd">    One of the file categories supported by the API (see the *File* section</span>
<span class="sd">    of the documentation).</span>
<span class="sd">    - `type (str)`  </span>
<span class="sd">    One of the file types supported by the API (see the *File* section of</span>
<span class="sd">    the documentation).</span>
<span class="sd">    **Return**</span>
<span class="sd">    The method returns an object representing the newly created file.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">create</span><span class="p">([</span><span class="s">&#39;files&#39;</span><span class="p">],</span> <span class="n">params</span><span class="o">=</span><span class="n">payload</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="frankly.FranklyClient.create_room">
    <p>def <span class="ident">create_room</span>(</p><p>self, **payload)</p>
    </div>
    

    
  
    <div class="desc"><p>Creates a new room object in the app and return that object.<br />
The properties of that new room are given as keyword arguments to the
method.</p>
<p><strong>Arguments</strong></p>
<ul>
<li>
<p><code>title (str)</code><br />
The title associated to this room.</p>
</li>
<li>
<p><code>status (str)</code><br />
One of <code>'unpublished'</code>, <code>'active'</code> or <code>'inactive'</code>.</p>
</li>
<li>
<p><code>description (str)</code><br />
A description of what this chat room is intended for, it is usually a
short description of topics that are discussed by participants.</p>
</li>
<li>
<p><code>avatar_image_url (str)</code><br />
The URL of an image to use when the room is displayed in one of the
mobile or web apps embedding a Frankly SDK.</p>
</li>
<li>
<p><code>featured_image_url (str)</code><br />
The URL of an image to use when the room is featured in one of the
mobile or web apps embedding a Frankly SDK.</p>
</li>
<li>
<p><code>featured (bool)</code><br />
Whether the room should be featured in the mobile or web apps embedding
a Frankly SDK.</p>
</li>
</ul>
<p><strong>Return</strong></p>
<p>The method returns an object representing the newly created room.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-frankly.FranklyClient.create_room', this);">Show source &equiv;</a></p>
  <div id="source-frankly.FranklyClient.create_room" class="source">
    <div class="codehilite"><pre><span class="k">def</span> <span class="nf">create_room</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">payload</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Creates a new room object in the app and return that object.  </span>
<span class="sd">    The properties of that new room are given as keyword arguments to the</span>
<span class="sd">    method.</span>
<span class="sd">    **Arguments**</span>
<span class="sd">    - `title (str)`  </span>
<span class="sd">    The title associated to this room.</span>
<span class="sd">    - `status (str)`  </span>
<span class="sd">    One of `&#39;unpublished&#39;`, `&#39;active&#39;` or `&#39;inactive&#39;`.</span>
<span class="sd">    - `description (str)`  </span>
<span class="sd">    A description of what this chat room is intended for, it is usually a</span>
<span class="sd">    short description of topics that are discussed by participants.</span>
<span class="sd">    - `avatar_image_url (str)`  </span>
<span class="sd">    The URL of an image to use when the room is displayed in one of the</span>
<span class="sd">    mobile or web apps embedding a Frankly SDK.</span>
<span class="sd">    - `featured_image_url (str)`  </span>
<span class="sd">    The URL of an image to use when the room is featured in one of the</span>
<span class="sd">    mobile or web apps embedding a Frankly SDK.</span>
<span class="sd">    - `featured (bool)`  </span>
<span class="sd">    Whether the room should be featured in the mobile or web apps embedding</span>
<span class="sd">    a Frankly SDK.</span>
<span class="sd">    **Return**</span>
<span class="sd">    The method returns an object representing the newly created room.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">create</span><span class="p">([</span><span class="s">&#39;rooms&#39;</span><span class="p">],</span> <span class="n">payload</span><span class="o">=</span><span class="n">payload</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="frankly.FranklyClient.create_room_message">
    <p>def <span class="ident">create_room_message</span>(</p><p>self, room_id, **payload)</p>
    </div>
    

    
  
    <div class="desc"><p>Creates a new message object in the room with id specified as first
argument.<br />
The properties of that new message are given as keyword arguments to the
method.</p>
<p><strong>Arguments</strong></p>
<ul>
<li><code>contents (list)</code><br />
A list of content objects representing what will be embedded into the
messages once the announcement is published to one or more rooms.<br />
Refer to the <em>Announcement</em> and <em>Message</em> sections of the docuementation
for more details about content objects.</li>
</ul>
<p><strong>Return</strong></p>
<p>The method returns an object representing the newly created message.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-frankly.FranklyClient.create_room_message', this);">Show source &equiv;</a></p>
  <div id="source-frankly.FranklyClient.create_room_message" class="source">
    <div class="codehilite"><pre><span class="k">def</span> <span class="nf">create_room_message</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">room_id</span><span class="p">,</span> <span class="o">**</span><span class="n">payload</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Creates a new message object in the room with id specified as first</span>
<span class="sd">    argument.  </span>
<span class="sd">    The properties of that new message are given as keyword arguments to the</span>
<span class="sd">    method.</span>
<span class="sd">    **Arguments**</span>
<span class="sd">    - `contents (list)`  </span>
<span class="sd">    A list of content objects representing what will be embedded into the</span>
<span class="sd">    messages once the announcement is published to one or more rooms.  </span>
<span class="sd">    Refer to the *Announcement* and *Message* sections of the docuementation</span>
<span class="sd">    for more details about content objects.</span>
<span class="sd">    **Return**</span>
<span class="sd">    The method returns an object representing the newly created message.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">create</span><span class="p">([</span><span class="s">&#39;rooms&#39;</span><span class="p">,</span> <span class="n">room_id</span><span class="p">,</span> <span class="s">&#39;messages&#39;</span><span class="p">],</span> <span class="n">payload</span><span class="o">=</span><span class="n">payload</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="frankly.FranklyClient.delete">
    <p>def <span class="ident">delete</span>(</p><p>self, path, params=None, payload=None)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-frankly.FranklyClient.delete', this);">Show source &equiv;</a></p>
  <div id="source-frankly.FranklyClient.delete" class="source">
    <div class="codehilite"><pre><span class="k">def</span> <span class="nf">delete</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">payload</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">backend</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">params</span><span class="p">,</span> <span class="n">payload</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="frankly.FranklyClient.delete_announcement">
    <p>def <span class="ident">delete_announcement</span>(</p><p>self, announcement_id)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-frankly.FranklyClient.delete_announcement', this);">Show source &equiv;</a></p>
  <div id="source-frankly.FranklyClient.delete_announcement" class="source">
    <div class="codehilite"><pre><span class="k">def</span> <span class="nf">delete_announcement</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">announcement_id</span><span class="p">):</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">delete</span><span class="p">([</span><span class="s">&#39;announcements&#39;</span><span class="p">,</span> <span class="n">announcement_id</span><span class="p">])</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="frankly.FranklyClient.delete_room">
    <p>def <span class="ident">delete_room</span>(</p><p>self, room_id)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-frankly.FranklyClient.delete_room', this);">Show source &equiv;</a></p>
  <div id="source-frankly.FranklyClient.delete_room" class="source">
    <div class="codehilite"><pre><span class="k">def</span> <span class="nf">delete_room</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">room_id</span><span class="p">):</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">delete</span><span class="p">([</span><span class="s">&#39;rooms&#39;</span><span class="p">,</span> <span class="n">room_id</span><span class="p">])</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="frankly.FranklyClient.publish_announcement">
    <p>def <span class="ident">publish_announcement</span>(</p><p>self, announcement_id, to_room_id)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-frankly.FranklyClient.publish_announcement', this);">Show source &equiv;</a></p>
  <div id="source-frankly.FranklyClient.publish_announcement" class="source">
    <div class="codehilite"><pre><span class="k">def</span> <span class="nf">publish_announcement</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">announcement_id</span><span class="p">,</span> <span class="n">to_room_id</span><span class="p">):</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">update</span><span class="p">([</span><span class="s">&#39;announcements&#39;</span><span class="p">,</span> <span class="n">announcement_id</span><span class="p">,</span> <span class="s">&#39;rooms&#39;</span><span class="p">,</span> <span class="n">to_room_id</span><span class="p">])</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="frankly.FranklyClient.read">
    <p>def <span class="ident">read</span>(</p><p>self, path, params=None, payload=None)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-frankly.FranklyClient.read', this);">Show source &equiv;</a></p>
  <div id="source-frankly.FranklyClient.read" class="source">
    <div class="codehilite"><pre><span class="k">def</span> <span class="nf">read</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">payload</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">backend</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">params</span><span class="p">,</span> <span class="n">payload</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="frankly.FranklyClient.read_announcement">
    <p>def <span class="ident">read_announcement</span>(</p><p>self, announcement_id)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-frankly.FranklyClient.read_announcement', this);">Show source &equiv;</a></p>
  <div id="source-frankly.FranklyClient.read_announcement" class="source">
    <div class="codehilite"><pre><span class="k">def</span> <span class="nf">read_announcement</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">announcement_id</span><span class="p">):</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">read</span><span class="p">([</span><span class="s">&#39;announcements&#39;</span><span class="p">,</span> <span class="n">announcement_id</span><span class="p">])</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="frankly.FranklyClient.read_announcement_list">
    <p>def <span class="ident">read_announcement_list</span>(</p><p>self)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-frankly.FranklyClient.read_announcement_list', this);">Show source &equiv;</a></p>
  <div id="source-frankly.FranklyClient.read_announcement_list" class="source">
    <div class="codehilite"><pre><span class="k">def</span> <span class="nf">read_announcement_list</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">read</span><span class="p">([</span><span class="s">&#39;announcements&#39;</span><span class="p">])</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="frankly.FranklyClient.read_announcement_room_list">
    <p>def <span class="ident">read_announcement_room_list</span>(</p><p>self, announcement_id)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-frankly.FranklyClient.read_announcement_room_list', this);">Show source &equiv;</a></p>
  <div id="source-frankly.FranklyClient.read_announcement_room_list" class="source">
    <div class="codehilite"><pre><span class="k">def</span> <span class="nf">read_announcement_room_list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">announcement_id</span><span class="p">):</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">read</span><span class="p">([</span><span class="s">&#39;announcements&#39;</span><span class="p">,</span> <span class="n">announcement_id</span><span class="p">,</span> <span class="s">&#39;rooms&#39;</span><span class="p">])</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="frankly.FranklyClient.read_room">
    <p>def <span class="ident">read_room</span>(</p><p>self, room_id)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-frankly.FranklyClient.read_room', this);">Show source &equiv;</a></p>
  <div id="source-frankly.FranklyClient.read_room" class="source">
    <div class="codehilite"><pre><span class="k">def</span> <span class="nf">read_room</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">room_id</span><span class="p">):</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">read</span><span class="p">([</span><span class="s">&#39;rooms&#39;</span><span class="p">,</span> <span class="n">room_id</span><span class="p">])</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="frankly.FranklyClient.read_room_list">
    <p>def <span class="ident">read_room_list</span>(</p><p>self)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-frankly.FranklyClient.read_room_list', this);">Show source &equiv;</a></p>
  <div id="source-frankly.FranklyClient.read_room_list" class="source">
    <div class="codehilite"><pre><span class="k">def</span> <span class="nf">read_room_list</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">read</span><span class="p">([</span><span class="s">&#39;rooms&#39;</span><span class="p">])</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="frankly.FranklyClient.read_room_message_list">
    <p>def <span class="ident">read_room_message_list</span>(</p><p>self, room_id, **params)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-frankly.FranklyClient.read_room_message_list', this);">Show source &equiv;</a></p>
  <div id="source-frankly.FranklyClient.read_room_message_list" class="source">
    <div class="codehilite"><pre><span class="k">def</span> <span class="nf">read_room_message_list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">room_id</span><span class="p">,</span> <span class="o">**</span><span class="n">params</span><span class="p">):</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">read</span><span class="p">([</span><span class="s">&#39;rooms&#39;</span><span class="p">,</span> <span class="n">room_id</span><span class="p">,</span> <span class="s">&#39;messages&#39;</span><span class="p">],</span> <span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="frankly.FranklyClient.update">
    <p>def <span class="ident">update</span>(</p><p>self, path, params=None, payload=None)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-frankly.FranklyClient.update', this);">Show source &equiv;</a></p>
  <div id="source-frankly.FranklyClient.update" class="source">
    <div class="codehilite"><pre><span class="k">def</span> <span class="nf">update</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">payload</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">backend</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">params</span><span class="p">,</span> <span class="n">payload</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="frankly.FranklyClient.update_file">
    <p>def <span class="ident">update_file</span>(</p><p>self, url, file_obj, file_size, mime_type, encoding=None)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-frankly.FranklyClient.update_file', this);">Show source &equiv;</a></p>
  <div id="source-frankly.FranklyClient.update_file" class="source">
    <div class="codehilite"><pre><span class="k">def</span> <span class="nf">update_file</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="n">file_obj</span><span class="p">,</span> <span class="n">file_size</span><span class="p">,</span> <span class="n">mime_type</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">upload</span><span class="p">(</span>
        <span class="n">url</span><span class="p">,</span>
        <span class="n">payload</span>          <span class="o">=</span> <span class="n">file_obj</span><span class="p">,</span>
        <span class="n">content_length</span>   <span class="o">=</span> <span class="n">file_size</span><span class="p">,</span>
        <span class="n">content_type</span>     <span class="o">=</span> <span class="n">mime_type</span><span class="p">,</span>
        <span class="n">content_encoding</span> <span class="o">=</span> <span class="n">encoding</span>
    <span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="frankly.FranklyClient.update_file_from_path">
    <p>def <span class="ident">update_file_from_path</span>(</p><p>self, url, file_path)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-frankly.FranklyClient.update_file_from_path', this);">Show source &equiv;</a></p>
  <div id="source-frankly.FranklyClient.update_file_from_path" class="source">
    <div class="codehilite"><pre><span class="k">def</span> <span class="nf">update_file_from_path</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="n">file_path</span><span class="p">):</span>
    <span class="n">file_size</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">getsize</span><span class="p">(</span><span class="n">file_path</span><span class="p">)</span>
    <span class="n">mime_type</span><span class="p">,</span> <span class="n">encoding</span> <span class="o">=</span> <span class="n">mimetypes</span><span class="o">.</span><span class="n">guess_type</span><span class="p">(</span><span class="n">file_path</span><span class="p">)</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">file_path</span><span class="p">,</span> <span class="s">&#39;rb&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">file_obj</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">update_file</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">file_obj</span><span class="p">,</span> <span class="n">file_size</span><span class="p">,</span> <span class="n">mime_type</span><span class="p">,</span> <span class="n">encoding</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="frankly.FranklyClient.update_room">
    <p>def <span class="ident">update_room</span>(</p><p>self, room_id, **payload)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-frankly.FranklyClient.update_room', this);">Show source &equiv;</a></p>
  <div id="source-frankly.FranklyClient.update_room" class="source">
    <div class="codehilite"><pre><span class="k">def</span> <span class="nf">update_room</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">room_id</span><span class="p">,</span> <span class="o">**</span><span class="n">payload</span><span class="p">):</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">update</span><span class="p">([</span><span class="s">&#39;rooms&#39;</span><span class="p">,</span> <span class="n">room_id</span><span class="p">],</span> <span class="n">payload</span><span class="o">=</span><span class="n">payload</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="frankly.FranklyClient.upload">
    <p>def <span class="ident">upload</span>(</p><p>self, url, params=None, payload=None, content_length=None, content_type=None, content_encoding=None)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-frankly.FranklyClient.upload', this);">Show source &equiv;</a></p>
  <div id="source-frankly.FranklyClient.upload" class="source">
    <div class="codehilite"><pre><span class="k">def</span> <span class="nf">upload</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">payload</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">content_length</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">content_type</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">content_encoding</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">backend</span><span class="o">.</span><span class="n">upload</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">params</span><span class="p">,</span> <span class="n">payload</span><span class="p">,</span> <span class="n">content_length</span><span class="p">,</span> <span class="n">content_type</span><span class="p">,</span> <span class="n">content_encoding</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="frankly.FranklyClient.upload_file">
    <p>def <span class="ident">upload_file</span>(</p><p>self, file_obj, file_size, mime_type, encoding=None, **params)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-frankly.FranklyClient.upload_file', this);">Show source &equiv;</a></p>
  <div id="source-frankly.FranklyClient.upload_file" class="source">
    <div class="codehilite"><pre><span class="k">def</span> <span class="nf">upload_file</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">file_obj</span><span class="p">,</span> <span class="n">file_size</span><span class="p">,</span> <span class="n">mime_type</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="o">**</span><span class="n">params</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">params</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&#39;category&#39;</span><span class="p">)</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">params</span><span class="p">[</span><span class="s">&#39;category&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s">&#39;chat&#39;</span>
    <span class="n">f</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_file</span><span class="p">(</span><span class="o">**</span><span class="n">params</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">update_file</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">url</span><span class="p">,</span> <span class="n">file_obj</span><span class="p">,</span> <span class="n">file_size</span><span class="p">,</span> <span class="n">mime_type</span><span class="p">,</span> <span class="n">encoding</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">f</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="frankly.FranklyClient.upload_file_from_path">
    <p>def <span class="ident">upload_file_from_path</span>(</p><p>self, file_path, **params)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-frankly.FranklyClient.upload_file_from_path', this);">Show source &equiv;</a></p>
  <div id="source-frankly.FranklyClient.upload_file_from_path" class="source">
    <div class="codehilite"><pre><span class="k">def</span> <span class="nf">upload_file_from_path</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">file_path</span><span class="p">,</span> <span class="o">**</span><span class="n">params</span><span class="p">):</span>
    <span class="n">file_size</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">getsize</span><span class="p">(</span><span class="n">file_path</span><span class="p">)</span>
    <span class="n">mime_type</span><span class="p">,</span> <span class="n">encoding</span> <span class="o">=</span> <span class="n">mimetypes</span><span class="o">.</span><span class="n">guess_type</span><span class="p">(</span><span class="n">file_path</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">params</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&#39;type&#39;</span><span class="p">)</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">params</span><span class="p">[</span><span class="s">&#39;type&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">mime_type</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">&#39;/&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">file_path</span><span class="p">,</span> <span class="s">&#39;rb&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">file_obj</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">upload_file</span><span class="p">(</span><span class="n">file_obj</span><span class="p">,</span> <span class="n">file_size</span><span class="p">,</span> <span class="n">mime_type</span><span class="p">,</span> <span class="n">encoding</span><span class="p">,</span> <span class="o">**</span><span class="n">params</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
      </div>
      </div>
      
      <div class="item">
      <p id="frankly.FranklyError" class="name">class <span class="ident">FranklyError</span></p>
      
  
    <div class="desc"><p>Instances of this class are used to represent errors that may be raised from
any call to methods of the <a href="#frankly.FranklyClient"><code>FranklyClient</code></a> class.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-frankly.FranklyError', this);">Show source &equiv;</a></p>
  <div id="source-frankly.FranklyError" class="source">
    <div class="codehilite"><pre><span class="k">class</span> <span class="nc">FranklyError</span><span class="p">(</span><span class="ne">Exception</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Instances of this class are used to represent errors that may be raised from</span>
<span class="sd">    any call to methods of the `frankly.FranklyClient` class.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">operation</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="n">status</span><span class="p">,</span> <span class="n">message</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Creates a new instance of this class.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_operation</span> <span class="o">=</span> <span class="n">operation</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_path</span>      <span class="o">=</span> <span class="n">path</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_status</span>    <span class="o">=</span> <span class="n">status</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_message</span>   <span class="o">=</span> <span class="n">message</span>

    <span class="k">def</span> <span class="nf">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s">&#39;</span><span class="si">%s</span><span class="s"> </span><span class="si">%s</span><span class="s"> [</span><span class="si">%s</span><span class="s">]: </span><span class="si">%s</span><span class="s">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_operation</span><span class="p">,</span> <span class="n">join_path</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_path</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">_status</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_message</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s">&#39;FranklyError { </span><span class="si">%s</span><span class="s"> }&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">__str__</span><span class="p">()</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">operation</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        The kind operation that generated this error, it may be one of `&#39;create&#39;`,</span>
<span class="sd">        `&#39;read&#39;`, `&#39;update&#39;`, `&#39;upload&#39;` or `&#39;delete&#39;`.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_operation</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">path</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        The path of the operation that generated this error as a list of elements</span>
<span class="sd">        representing the resource the operation was executed on.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_path</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">status</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        The status code of the error, which may be any of the</span>
<span class="sd">        [http status codes](http://en.wikipedia.org/wiki/List_of_HTTP_status_codes).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_status</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">message</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        A human-readable description of why the error happened.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_message</span>
</pre></div>

  </div>
</div>


      <div class="class">
          <h3>Ancestors (in MRO)</h3>
          <ul class="class_list">
          <li><a href="#frankly.FranklyError">FranklyError</a></li>
          <li><a href="/exceptions.Exception.ext">exceptions.Exception</a></li>
          <li><a href="/exceptions.BaseException.ext">exceptions.BaseException</a></li>
          <li><a href="/__builtin__.object.ext">__builtin__.object</a></li>
          </ul>
          <h3>Class variables</h3>
            <div class="item">
            <p id="frankly.FranklyError.args" class="name">var <span class="ident">args</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
          <h3>Instance variables</h3>
            <div class="item">
            <p id="frankly.FranklyError.message" class="name">var <span class="ident">message</span></p>
            

            
  
    <div class="desc"><p>A human-readable description of why the error happened.</p></div>
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="frankly.FranklyError.operation" class="name">var <span class="ident">operation</span></p>
            

            
  
    <div class="desc"><p>The kind operation that generated this error, it may be one of <code>'create'</code>,
<code>'read'</code>, <code>'update'</code>, <code>'upload'</code> or <code>'delete'</code>.</p></div>
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="frankly.FranklyError.path" class="name">var <span class="ident">path</span></p>
            

            
  
    <div class="desc"><p>The path of the operation that generated this error as a list of elements
representing the resource the operation was executed on.</p></div>
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="frankly.FranklyError.status" class="name">var <span class="ident">status</span></p>
            

            
  
    <div class="desc"><p>The status code of the error, which may be any of the
<a href="http://en.wikipedia.org/wiki/List_of_HTTP_status_codes">http status codes</a>.</p></div>
  <div class="source_cont">
</div>

            </div>
          <h3>Methods</h3>
            
  <div class="item">
    <div class="name def" id="frankly.FranklyError.__init__">
    <p>def <span class="ident">__init__</span>(</p><p>self, operation, path, status, message)</p>
    </div>
    

    
  
    <div class="desc"><p>Creates a new instance of this class.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-frankly.FranklyError.__init__', this);">Show source &equiv;</a></p>
  <div id="source-frankly.FranklyError.__init__" class="source">
    <div class="codehilite"><pre><span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">operation</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="n">status</span><span class="p">,</span> <span class="n">message</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Creates a new instance of this class.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_operation</span> <span class="o">=</span> <span class="n">operation</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_path</span>      <span class="o">=</span> <span class="n">path</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_status</span>    <span class="o">=</span> <span class="n">status</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_message</span>   <span class="o">=</span> <span class="n">message</span>
</pre></div>

  </div>
</div>

  </div>
  
      </div>
      </div>

  </section>

    </article>
  <div class="clear"> </div>
  <footer id="footer">
    <p>
      Documentation generated by
      <a href="https://github.com/BurntSushi/pdoc">pdoc 0.3.1</a>
    </p>

    <p>pdoc is in the public domain with the
      <a href="http://unlicense.org">UNLICENSE</a></p>

    <p>Design by <a href="http://nadh.in">Kailash Nadh</a></p>
  </footer>
</div>
</body>
</html>
