<!doctype html>
<html>
    <head>
        <meta charset="utf-8">

        <!-- Always force latest IE rendering engine or request Chrome Frame -->
        <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
        <link rel="icon"
              type="image/png"
              href="../../images/frankly_favicon_32x32_no_bg.png">
        <!-- Use title if it's in the page YAML frontmatter -->
        <title>Advanced Features
            - Frankly Developer Portal</title>
        <script src="/bower_components/webcomponentsjs/webcomponents-lite.min-01242ae0.js"></script>
        <link href="/stylesheets/normalize-14170e97.css" rel="stylesheet" /><link href="/stylesheets/all-f2dad6dc.css" rel="stylesheet" />
        <link href="/stylesheets/highlight-6793ce8e.css" rel="stylesheet" /><link href="/stylesheets/all-f2dad6dc.css" rel="stylesheet" />
        <style is="custom-style">
                    :root {
                        --paper-toolbar-background: #2A2E33;
                        --paper-input-container-focus-color: #fa3b1b;
                        --paper-input-container-underline-focus: {
                            display:none;
                        };
                    }
                    .paper-header-panel {
                        background-color: #2A2E33;
                        padding-right: 20px;
                        color: white;
                    }
                    .page-content {
                        padding-left: 30px;
                        padding-right: 30px;
                        overflow: scroll;
                    }

                    .nav-tree li {
                        list-style-type: none;
                    }

                    .nav-tree li a {
                            color: white;
                    }
                    .logo {
                        margin-left: 5px;
                        margin-top: 20px;
                        width: 180px;
                    }
                    .search {
                        --paper-input-container-input-color: white;
                        padding-left: 20px;
                        padding-right: 20px;
                    }
                    .version-dropdown {
                        width:90px;
                        --paper-input-container-underline: {
                            display:none;
                        };
                    }

                    .version-dropdown a {
                        color: black;
                    }

                    .previous {

                    }

                    .next {

                    }

                    .floating-toc {
                        margin-left: -20px;
                    }

                    .floating-toc a {
                        color:black;
                    }

                    .customization-table {
                        table, th, td {
                            border: 1px solid black;
                            text-align: left;
                        }
                    }

                    p {
                        line-height: 150%;
                    }
                </style>
        <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js" type="text/javascript"></script>
        <script src="//cdnjs.cloudflare.com/ajax/libs/lunr.js/0.5.9/lunr.min.js" type="text/javascript"></script>
        <script src="/javascripts/all-b1933d9a.js"></script>
        <script src="/javascripts/anchorify-9f550341.js"></script>

        <link href="/bower_components/paper-header-panel/paper-header-panel.html" rel="import">
        <link href="/bower_components/paper-drawer-panel/paper-drawer-panel.html" rel="import">
        <link href="/bower_components/paper-toolbar/paper-toolbar.html" rel="import">
        <link href="/bower_components/paper-icon-button/paper-icon-button.html" rel="import">
        <link href="/bower_components/iron-icons/iron-icons.html" rel="import">
        <link href="/bower_components/iron-flex-layout/iron-flex-layout.html" rel="import">
        <link href="/bower_components/paper-input/paper-input.html" rel="import">
        <link href="/bower_components/paper-dropdown-menu/paper-dropdown-menu.html" rel="import">
        <link href="/bower_components/paper-menu/paper-menu.html" rel="import">
        <link href="/bower_components/paper-item/paper-item.html" rel="import">
        <link rel="icon"
              type="image/png"
              href="images/frankly_favicon_32x32_no_bg.png">
    </head>

    <body class="ios ios_latest ios_latest_doc ios_latest_doc_04-advanced-features">
        <paper-drawer-panel class="flex" mode="seamed">
            <div class="flex page-content" main>
                <div class="horizontal layout">
                    <paper-icon-button icon="menu" on-tap="menuAction" paper-drawer-toggle></paper-icon-button>
                    <h1 class="flex">
                        Advanced Features
                    </h1>
                    <span class="flex">
                    </span>
                    <paper-dropdown-menu noink no-animation class="version-dropdown">
                        <paper-menu class="dropdown-content version-dropdown" selected="0">
                                <paper-item>
                                    <a href="/ios/latest">latest</a>
                                </paper-item>
                        </paper-menu>
                    </paper-dropdown-menu>

                </div>
                <div style="max-width:70%">
                    <h2 id="opening-a-room-directly">Opening a Room Directly</h2>

<p>While the Frankly client SDKs do provide UI for the Frankly Room List and Frankly Rooms, we understand that displaying a Frankly Room List won&rsquo;t
always make sense in the context of many developers&rsquo; applications. For that reason, we&rsquo;re providing a client API meant for directly accessing any
Room, already created for your application, simply by passing a Room ID. Please note of course that you have the option of simply hardcoding the
Room ID in your client or using our server API to fetch the desired Room ID.</p>

<h3 id="using-the-room-api">Using the Room API</h3>

<p>In order to open a Frankly Room in the SDK while bypassing the Frankly Room List UI you must specify the <code>roomId</code> for the Room you&rsquo;d
like to open, as well as the Room <code>title</code> that you&rsquo;d like to show to the end user while the Frankly SDK is retrieving the Room&rsquo;s metadata
from Frankly servers. Calling the following will retrieve a view controller for the given <code>roomId</code> if non-nil, otherwise it will return nil.</p>
<div class="highlight smalltalk"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1</pre></td><td class="code"><pre><span class="err">-</span> <span class="p">(</span><span class="nc">UIViewController</span> <span class="nf">*</span><span class="p">)</span><span class="nf">roomViewControllerWithRoomId:</span><span class="p">(</span><span class="nc">NSNumber</span> <span class="nf">*</span><span class="p">)</span><span class="nf">roomId</span> <span class="nf">title:</span><span class="p">(</span><span class="nc">NSString</span> <span class="nf">*</span><span class="p">)</span><span class="nf">title</span><span class="p">;</span>
</pre></td></tr></tbody></table>
</div>

<p>Calling the following will retrieve a Frankly-styled navigation controller which contains a view controller for the given <code>roomId</code>
if non-nil, otherwise it will return nil.</p>
<div class="highlight smalltalk"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1</pre></td><td class="code"><pre><span class="err">-</span> <span class="p">(</span><span class="nc">UIViewController</span> <span class="nf">*</span><span class="p">)</span><span class="nf">roomNavigationControllerWithRoomId:</span><span class="p">(</span><span class="nc">NSNumber</span> <span class="nf">*</span><span class="p">)</span><span class="nf">roomId</span> <span class="nf">title:</span><span class="p">(</span><span class="nc">NSString</span> <span class="nf">*</span><span class="p">)</span><span class="nf">title</span><span class="p">;</span>
</pre></td></tr></tbody></table>
</div>

<h2 id="room-activity-badge">Room Activity Badge</h2>

<p>Because in some apps it will make more sense to link directly to a Room, rather than use the Frankly Room List UI, we want to provide you
with a way of alerting users of new activity that has happened in the Room so that they&rsquo;ll be compelled to continue returning to chat and
continuously engage. Below we&rsquo;ve outlined how to use the Activity Indicator API which will return a value of in-Room activity the user
has to respond to.</p>

<h3 id="ios-activity-indicator">iOS Activity Indicator</h3>

<p><code>FranklySDKActivityDelegate</code> requires the following function:</p>

<ul>
<li>  <code>- (void)didReceiveActivityOfType:(FRSDKActivityType)type forEntity:(NSNumber *)entityId displayValue:(NSString *)displayValue;</code> with the following message parameters:

<ul>
<li>  <code>type</code>: One of the <code>FRSDKActivityType</code> <code>enum</code> values to determine what type of activity occurred.</li>
<li>  <code>entityId</code>: Is an <code>NSNumber</code> that is the ID of the entity with which the activity is associated.

<ul>
<li>  If type is <code>FRSDKActivityTypeApplication</code> then this will be the <code>application Id</code>.</li>
<li>  If type is <code>FRSDKActivityTypeRoom</code> then this will be the <code>room Id</code>.</li>
</ul></li>
<li>  <code>displayValue</code>: Is an <code>NSString</code> that represents the activity.

<ul>
<li>  The partner&rsquo;s app should determine whether or not to display this. Currently, it is a count that would be displayed in a badge. If this is an empty string, then it means the previous value should be cleared.
<code>didReceiveActivityOfType</code> will be called at various times by the SDK when activity occurs or you can trigger it manually to get
the current state. When the delegate receives this message, it is up to the partner app to determine whether to update the UI to display the
<code>displayValue</code> or ignore it. If the value is an empty string, then clear the previous value if it was displayed.
To manually trigger a <code>didReceiveActivityOfType:</code> call, send either of the  <code>requestActivityUpdateForApplication</code>, or
<code>requestActivityUpdateForRoomWithId:</code> messages to the <code>FranklySDK</code> object.</li>
</ul></li>
</ul></li>
<li>  <code>[[FranklySDK sharedInstance] requestActivityUpdateForApplication];</code> will cause the SDK to request updated activity data
from the server. If there is data then it will send the <code>didReceiveActivityOfType:</code> to the delegate, otherwise it will
not.</li>
</ul>

<p>To use this functionality, create an object that conforms to the <code>FranklySDKActivityDelegate</code> protocol and then assign that to
the FranklySDK object&rsquo;s <code>activityDelegate</code> property, <code>[[FranklySDK sharedInstance] setActivityDelegate:delegate
object];</code>. This object will start to receive updates as the server sends them and will receive updates from manual requests if
they updates contain data.</p>

<h3 id="partial-view-rooms">Partial View Rooms</h3>

<p>In addition to simply presenting <code>FRSDKRoomViewController</code> or pushing it onto your existing navigation controller,
you can use its view as a subview of your own views. In order to do this, make sure to follow standard procedure
for view controller containment. The following snippet illustrates how you might add a Room view controller&rsquo;s view
to your own view controller&rsquo;s view.</p>
<div class="highlight smalltalk"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6</pre></td><td class="code"><pre><span class="err">-</span> <span class="p">(</span><span class="nv">void</span><span class="p">)</span><span class="nf">viewDidLoad</span> <span class="p">{</span>
    <span class="nc">FRSDKRoomViewController</span> <span class="nf">*</span><span class="nv">roomVC</span> <span class="nf">=</span> <span class="p">[[</span><span class="nc">FranklySDK</span> <span class="nf">sharedInstance</span><span class="p">]</span> <span class="nf">roomViewControllerWithRoomId:</span><span class="nv">kYourCoolRoomId</span> <span class="nf">title:</span><span class="err">@</span><span class="c">"Nice!"</span><span class="p">];</span>
    <span class="nf">roomVC</span><span class="p">.</span><span class="nv">delegate</span> <span class="nf">=</span> <span class="bp">self</span><span class="p">;</span> <span class="nf">//</span> <span class="nv">more</span> <span class="nf">on</span> <span class="nf">this</span> <span class="nf">below</span>
    <span class="p">[</span><span class="bp">self</span><span class="p">.</span><span class="nv">view</span> <span class="nf">addSubview:</span><span class="nv">roomVC</span><span class="p">.</span><span class="nv">view</span><span class="p">];</span>
    <span class="p">[</span><span class="bp">self</span> <span class="nf">addChildViewController:</span><span class="nv">roomVC</span><span class="p">];</span>
<span class="p">}</span>
</pre></td></tr></tbody></table>
</div>

<p><code>FRSDKRoomViewController</code> can provide a delegate with information about changes to its editing state. If you&rsquo;re interested
in this information, make sure your delegate conforms to <code>FRSDKRoomViewControllerDelegate</code>.
<code>FRSDKRoomViewController</code> will send the following messages to its delegate:</p>

<p>The concept of a Partial View Room allows developers to place the Frankly chat Room UI in the same view as another piece of content, such as a
photo or video.</p>
<div class="highlight smalltalk"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2</pre></td><td class="code"><pre><span class="err">-</span> <span class="p">(</span><span class="nv">void</span><span class="p">)</span><span class="nf">roomViewControllerWillBeginEditing:</span><span class="p">(</span><span class="nc">FRSDKRoomViewController</span> <span class="nf">*</span><span class="p">)</span><span class="nf">roomViewController</span> <span class="nf">animated:</span><span class="p">(</span><span class="nc">BOOL</span><span class="p">)</span><span class="nf">animated</span> <span class="nf">keyboardFrame:</span><span class="p">(</span><span class="nc">CGRect</span><span class="p">)</span><span class="nf">keyboardFrame</span><span class="p">;</span>
<span class="nf">-</span> <span class="p">(</span><span class="nv">void</span><span class="p">)</span><span class="nf">roomViewControllerWillEndEditing:</span><span class="p">(</span><span class="nc">FRSDKRoomViewController</span> <span class="nf">*</span><span class="p">)</span><span class="nf">roomViewController</span> <span class="nf">animated:</span><span class="p">(</span><span class="nc">BOOL</span><span class="p">)</span><span class="nf">animated</span><span class="p">;</span>
</pre></td></tr></tbody></table>
</div>

<h3 id="enabling-push-notifications">Enabling Push Notifications</h3>

<p>To configure FranklySDK for use with APNS, you just need to pass us the device token you receive in <code>didRegisterForRemoteNotificationsWithDeviceToken:</code>. You&rsquo;ll use <code>-[FranklySDK registerForNotificationsWithDeviceToken:]</code> to do this. If you already use push notifications, this setup will be very familiar to you. A quick implementation might look something like the following:</p>
<div class="highlight smalltalk"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11</pre></td><td class="code"><pre><span class="err">-</span> <span class="p">(</span><span class="nv">void</span><span class="p">)</span><span class="nf">applicationDidFinishLaunchingWithOptions:</span><span class="p">(</span><span class="nc">NSDictionary</span> <span class="nf">*</span><span class="p">)</span><span class="nf">options</span> <span class="p">{</span>
    <span class="nc">UIUserNotificationType</span> <span class="nf">notificationType</span> <span class="nf">=</span> <span class="nc">UIUserNotificationTypeAlert</span> <span class="nf">|</span> <span class="nc">UIUserNotificationTypeSound</span><span class="p">;</span>
    <span class="nf">UIUserNotificationSettings</span> <span class="nf">*</span><span class="nv">notificationSettings</span> <span class="nf">=</span> <span class="p">[</span><span class="nc">UIUserNotificationSettings</span> <span class="nf">settingsForTypes:</span><span class="nv">notificationType</span> <span class="nf">categories:</span><span class="bp">nil</span><span class="p">];</span>
    <span class="p">[[</span><span class="nc">UIApplication</span> <span class="nf">sharedApplication</span><span class="p">]</span> <span class="nf">registerUserNotificationSettings:</span><span class="nv">notificationSettings</span><span class="p">];</span>
<span class="p">}</span>
<span class="nf">-</span> <span class="p">(</span><span class="nv">void</span><span class="p">)</span><span class="nf">application:</span><span class="p">(</span><span class="nc">UIApplication</span> <span class="nf">*</span><span class="p">)</span><span class="nf">application</span> <span class="nf">didRegisterUserNotificationSettings:</span><span class="p">(</span><span class="nc">UIUserNotificationSettings</span> <span class="nf">*</span><span class="p">)</span><span class="nf">notificationSettings</span> <span class="p">{</span>
    <span class="p">[</span><span class="nv">application</span> <span class="nf">registerForRemoteNotifications</span><span class="p">];</span>
<span class="p">}</span>
<span class="nf">-</span> <span class="p">(</span><span class="nv">void</span><span class="p">)</span><span class="nf">application:</span><span class="p">(</span><span class="nc">UIApplication</span> <span class="nf">*</span><span class="p">)</span><span class="nf">application</span> <span class="nf">didRegisterForRemoteNotificationsWithDeviceToken:</span><span class="p">(</span><span class="nc">NSData</span> <span class="nf">*</span><span class="p">)</span><span class="nf">deviceToken</span> <span class="p">{</span>
    <span class="p">[[</span><span class="nc">FranklySDK</span> <span class="nf">sharedInstance</span><span class="p">]</span> <span class="nf">registerForNotificationsWithDeviceToken:</span><span class="nv">deviceToken</span><span class="p">];</span>
<span class="p">}</span>
</pre></td></tr></tbody></table>
</div>

                    <div style="height:20px"></div>
                </div>

            </div>
            <div class="flex" drawer>
                <paper-header-panel class="flex paper-header-panel layout vertical" drawer mode="seamed">
                    <paper-toolbar>
<a href="/">                            <img class="logo" src="/images/franklyinc_logo_color_large-044d426f.png" />
</a>                    </paper-toolbar>
                    <paper-input label="Search Documentation" class="search" type="search"></paper-input>
                    <div class="side-panel">
                        <ul class="nav-tree">
                            <li class='child '><a href="00-quick-start.html">Quick Start</a></li><li class='child '><a href="01-getting-started.html">Getting Started</a></li><li class='child '><a href="02-authentication.html">Authentication</a></li><li class='child '><a href="03-the-basics.html">The Basics</a></li><li class='child active'><a href="04-advanced-features.html">Advanced Features</a></li><li class='child '><a href="06-downloads.html">Downloads</a></li>
                        </ul>
                    </div>
                </paper-header-panel>
            </div>
        </paper-drawer-panel>
    </body>
    <script>
    $('li:contains("Advanced Features")').replaceWith("<nav class='anchorific floating-toc'></nav>");
    $('.page-content').anchorific({
        anchorText: ''
    });
    </script>
</html>
