<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Basic Integration</title>
    <meta name="keywords" content="Frankly Platform" />
	<meta name="viewport" content="width=device-width, initial-scale=1"/>
    <link type="text/css" rel="stylesheet" href="css/main.css">
    <link type="text/css" rel="stylesheet" href="css/bootstrap.css">	
    <link rel="stylesheet" type="text/css">
	<link rel="icon" 
	      type="image/png" 
	      href="frankly_favicon_32x32_no_bg.png">
	<script src="https://google-code-prettify.googlecode.com/svn/loader/run_prettify.js?skin=sunburst"></script>
	<script src="http://code.jquery.com/jquery-1.11.3.min.js"></script>
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
	<script src="js/load_frankly_menus.js"></script>
	
	<script> 
	var frankly_menu = [
	'<ul>',
		'<li><a href="index.html">Getting Started</a></li>',
		'<li><a href="InstallSDK.html">Installing the SDK</a></li>',
		'<li><a href="InitializeSDK.html">Initializing the SDK</a>',
		'<li><a href="Auth.html">Authenticating</a>',
		'<li><a href="BasicIntegration.html">Basic Integration</a>',
			'<ul>',
				'<li><a href="#First_Room">First Room List</a></li>',
				'<li><a href="#Set_DisplayName_Avatar">Profile Info</a></li>',
				'<li><a href="#JS_Room_Embed">Embeddable Rooms</a></li>',
				'<li><a href="#Guest_Mode">Guest Mode Access</a></li>',		
			'</ul>',
		'</li>',
		'<li><a href="AdvancedIntegrations.html">Advanced Integrations</a>',
		'<li><a href="APIReference.html">API Reference</a>',
		'<li><a href="downloads.html">Downloads</a>',
		'<li><a href="Support.html">Support</a>',
	'</ul>'
	];
	
	
	jQuery(document).ready(function($){
  		set_menu_array(frankly_menu);
  	});
	</script>
	
</head>

<nav class="navbar navbar-inverse" role="navigation" style="z-index:100">
   <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" 
         data-target="#frankly-navbar-collapse">
         <span class="sr-only">Toggle navigation</span>
         <span class="icon-bar"></span>
         <span class="icon-bar"></span>
         <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html"><div class="mobile-logo"></div></a>
   </div>
   <div class="collapse navbar-collapse" id="frankly-navbar-collapse">
      <!--Nav Bar List Goes Here-->
   </div>
</nav>

<script>
	jQuery(document).ready(function($){
		load_menus();
	});
</script>

<div class="sidebar-container">

<div class="sidebar-logo"></div>

	<div class="sidebar-content" id="side-nav-container">
		<!--Side Bar List Goes Here-->
	</div>

</div>

<div class="container container-body">
	<div class="header">
		<h1 class="noborder">
			Basic Integration
		</h1>

<br>

			<ul>
				<li><a href="#First_Room">Setting Up Your First Room List</a>
				<li><a href="#Set_DisplayName_Avatar">Setting the Display Name & Profile Avatar</a>
				<li><a href="#JS_Room_Embed">Embedding a Room on Web</a></li>
				<li><a href="#Guest_Mode">Enabling Guest Mode Access</a>
			</ul>

	</div>

<br>

	<div class="doc">
		<a id="First_Room">
			<h3>
				Setting Up Your First Room List
			</h3>
		</a>

		<p>
			<i>Important Note</i> Please make sure you've set up at least one Room in the Admin Console before proceeding. If you're unsure of how to do this or if you don't have Admin Console access, please see <i><a href="index.html">Getting Started</a></i> for next steps.
		</p>
	
<br>

		<h4>
			Calling the Room List via the iOS SDK
		</h4>



<br>

		<p>
			To call the Room List, retrieve the room list controller, <code>[FranklySDK roomListViewController]</code>, and present it in your app or push it on your navigation controller.
		</p>
		
<br>
<br>

		<h4>
			Calling the Room List via the Android SDK
		</h4>
		
		<p>	
			The Frankly SDK contains a <code>RoomListActivity</code> class which contains everything needed to show the chatroom list and allow the user to join chatrooms:
		</p>


<pre class="prettyprint"><code class="lang-java">
Intent intent = new Intent(context, RoomListActivity.class);

context.startActivity(intent);
</code></pre>


	</div>

<br>

	<div class="doc">
			<a id="Set_DisplayName_Avatar">
				<h3>
					Setting the Display Name & Profile Avatar
				</h3>
			</a>
		
<br>

			<h4>
				Setting User Info via the iOS SDK
			</h4>
		
			<p>			
				Set the FranklySDK’s <code>profileDelegate</code> to an object that conforms to the <code>FranklySDKUserProfileDelegate</code> protocol. In our example code, we’ve made our <code>ViewController</code> also conform to this protocol:
			</p>

<br>


<pre class="prettyprint"><code class="lang-cpp">
@interface ViewController : UIViewController &lt;FranklySDKAuthenticationDelegate, FranklySDKUserProfileDelegate&gt;
</code></pre>


<br>


<pre class="prettyprint"><code class="lang-cpp">
- (void)viewDidLoad {

	[super viewDidLoad];

	[FranklySDK sharedInstance].authenticationDelegate = self;
	[FranklySDK sharedInstance].profileDelegate = self;				

	[[FranklySDK sharedInstance] initiateAuthentication];
}
</code></pre>

			
<br>

			<p>
				The profile delegate will get called every time the user profile image or display name changes.  Also, you can enable or disable user editing of their profile data within the FranklySDK UI by allowing your delegate respond appropriately to the <code>-(BOOL)shouldAllowProfileEditing</code> delegate request.
			</p>
			
<br>

			<p>
				Setting the user's display name and avatar can be done via the calls through the FranklySDK object:
			</p>


<pre class="prettyprint"><code class="lang-cpp">
-(void)setUserName:(NSString *)userName profileImage:(UIImage *)image];
</code></pre>

		
			<p>	
				When the user name and image have been updated and synced with the server the profileDelegate will get a called back that they have been changed.
			</p>
		
<br>

			<h4>
				Setting User Info via the Android SDK
			</h4>
		
			<p>
				Developers can upload new avatars for users to the Frankly servers as follows:


<pre class="prettyprint"><code class="lang-java">
final UserManager userManager = UserManager.getInstance(context);
final String userAvatarUrlString = userManager.uploadUserAvatar(context, intent);
</code></pre>


			<p>
				where the Intent contains either the data URI of the Intent, or an extra called "data" which stores a Bitmap. (The Android Gallery app currently returns the data in this format in onActivityResult().) Note that simply uploading the image does not tie the image to any particular user. The returned URL string must be set on a User object and passed to UserManager for persisting as follows:
			</p>


<pre class="prettyprint"><code class="lang-java">
user.setAvatarImageUrlString(userAvatarUrlString);
userManager.update(user);
</code></pre>


			<p>
				Similarly, to update the display name of a user, simply do the following:
			</p>


<pre class="prettyprint"><code class="lang-java">
user.setDisplayName(displayName);
userManager.update(user);
</code></pre>


			<p>
				<b>WARNING:</b> All UserManager calls must be done on a non-UI thread.
			</p>

<br>

			<h4>
				Setting User Info via the JavaScript SDK
			</h4>
		
			<p>
				<i>Coming soon!</i>
			</p>

	</div>

<br>

	<div class="doc">
			<a id="JS_Room_Embed">
				<h3>
					Embedding a Room on Web
				</h3>
			</a>
		
<br>

			<p>
				The Frankly Web App can be embedded directly into your web app through the use of JavaScript and iframes. This service allows your users the ability to use Frankly supported chat without having to leave your web app.
			</p>
		
			<p>
				There are two steps that need to be taken in order to embed Frankly within your web app:
			<p/>
			
			<p>
				<ul>
					<li>Include the Frankly Widget script on the page that will contain the Frankly Web App, including a small script on the page to initialize the Frankly Web App.</li>
					<li>Embed the Frankly Web App using the <code>&lt;iframe&gt;</code> tag.</li>
				</ul>
			</p>
			
			<p>
				More detail on these steps below.
			</p>
			
<br>
<br>
		
				<img src="images/embed_html_1024.png" border="1" width="758px">

<br>
<br>
<br>

			<h4>
				1. Include Frankly Widget Script
			</h4>
			
<br>

			<p>
				Include the following line of code in the head of your HTML:
			</p>
			
<pre class="prettyprint">
<code class="lang-html">
&lt;script src="//d13r8avoofccpt.cloudfront.net/0.2.1/frankly.min.js"&gt;&lt;/script&gt;
&lt;script&gt;
<code class="lang-js">  frankly.widgets.init({
      onAuthenticationRequest: function(nonce){
        console.log(nonce);
        return new Promise(function (resolve, reject) {
            /*
             * TODO: generate an identity token and pass it to resolve, or call
             * reject with an error.
             */
        });
      }
  });</code>
&lt;/script&gt;
</code></pre>

<br>
		<p>
			This script sets the configuration for your page to host the Frankly Web App, allowing it to run within your web app.
		</p>
		
		<p>
			The call to <code>frankly.widgets.init</code> configures the web page to properly communicate with the embedded Frankly Widgets.
		</p>
		
		<p>
			The function set to <code>onAuthenticationRequest</code> will be called when the widget needs to authenticate as a user in order to render the view and enable chatting. It must return a javascript promise where the resolve callback must be called with the generated identity token.
		</p>

		<p>
			<b>Note</b> the section of the above script that includes the <b>TODO</b> statement. This section must be replaced with code that generates an identity token using one of Frankly’s server SDKs. We strongly recommend that you generate this token on your server side, and call it from a script within this script block. Exposing your Frankly App key and secret within this code block may compromise the security of your Frankly Web App. For more information on generating an identity token using one of Frankly’s server SDKs, please consult the documentation on <a href="Auth.html#auth_flow">generating identity tokens</a>.
		</p>

<br>

		<h4>
			2. Embed the Frankly Web App in an iframe
		</h4>
		
<br>

	 	<p>
			Include the following line of code in the body of your HTML, at the place that you want the Frankly Web App to appear:
		</p>
		
<pre class="prettyprint"><code>
	&lt;iframe src="https://app.franklychat.com/web/{app_id}/#/{room_id}"&gt;&lt;/iframe&gt;
</code></pre>

<br>

		<p>
			You will need to replace <code>{app_id}</code> with your app’s unique numeric ID, e.g. 123, and replace <code>{room_id}</code> with your room’s unique numeric ID, e.g. 9876. If you wish to display all room avatar tiles to your users, rather than embedding a specific room, then include the following code in your HTML:
		</p>
		
<pre class="prettyprint"><code class="lang=html">
	&lt;iframe src="https://app.franklychat.com/web/{app_id}"&gt;&lt;/iframe&gt;
</code></pre>

<br>

		<p>
			You can get your <code>app_id</code> by logging into the Frankly Admin Panel and selecting <i>Settings</i> in the left hand menu.
		</p>
		
<br>
<br>

			<figure>
				<img src="images/admin-settings.png" border="1"><br>
				<figaction><i>Settings option in Frankly Admin Console</i></figaction>
			</figure>

<br>
<br>
<br>

		<p>
			Scroll down the page until you reach the <i>Web App Settings</i> panel. It is here that you can find your Web App ID, as the suffix of your App URL:
		</p>

<br>
<br>

			<figure>
				<img src="images/app_id.png" border="1"><br>
				<figaction><i>Getting App ID from Admin Console</i><figaction>
			</figure>

<br>
<br>
<br>
			
			
			
	</div>

	<div class="doc">
			<a id="Guest_Mode">
				<h3>
					Enabling Guest Mode Access
				</h3>
			</a>
		
<br>

			<p>
				<i>Coming soon!</i>
			</p>
				
	</div>

<br>
<br>
<br>
<br>


	<div class="pager-container">
	<nav>
	  <ul class="pager">
	    <li class="previous"><a href="Auth.html"><span aria-hidden="true">&larr;</span> Authenticating</a></li>
	    <li class="next"><a href="AdvancedIntegrations.html">Advanced Integrations <span aria-hidden="true">&rarr;</span></a></li>
	  </ul>
	</nav>
	</div>
</div>

<br>
<br>


</html>