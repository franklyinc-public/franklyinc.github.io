<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Frankly iOS SDK</title>
    <meta name="keywords" content="Frankly Platform" />
    <link type="text/css" rel="stylesheet" href="../css/main.css">
    <link rel="stylesheet" type="text/css">
	<link href="../themes/prism.css" rel="stylesheet" />
	<title>Frankly iOS SDK Integration Guide</title>
	
	
</head>


<body>



	<h1>
		Frankly iOS SDK Integration Guide
	</h1>
<p><i>Last updated June 09, 2015</i></p>

<br>
<br>

	<h2>
		Outline
	</h2>

	<ul>	
		<li><a href="#installing">Installing the SDK</a>
		<ul>
			<li><a href="#cocoapods">With CocoaPods (recommended)</a>
			<li><a href="#traditional">Traditional Installation</a>
		</ul>
		<li><a href="#initializing">Initializing the SDK</a>
		<li><a href="#authenticating">Authenticating the Client</a>
		<li><a href="#setting_displayname_and_avatar">Programmatically Setting User Display Names & Profile Avatars</a>
		<li><a href="#set_up_first_room_list">Setting Up Your First Room List</a>
		<li><a href="#log_in">Allowing the User to Log In or Sign Up</a>
	</ul>

<br>
<br>	

<a id="installing">
	<h2>
		Installing the SDK
	</h2>
</a>

<a id="cocoapods">
	<h3>
		Integrating with CocoaPods (recommended)
	</h3>
	
<p><i>Not yet available - please request if desired.</i></p>

<p>
	Adding FranklySDK to your project using CocoaPods is easy. You'll need to install it on your computer if you haven't already.
</p>
	
	<pre><code><samp>
	sudo gem install cocoapods
	</samp></code></pre>

<p>
	Once you've installed CocoaPods, just add the following to your Podfile and run pod install. You're done!
</p>

	<pre><code>
	source 'https://github.com/CocoaPods/Specs'
	source 'git@github.com:tictocplanet/private-pods.git'
	pod 'FranklySDK', '~> 0.0.2'
	</pre></code>
</a>

<a id="traditional">
	<h3>
		Traditional Installation
	</h3>

	<ol>
		<li>Download the SDK from the compressed file/link included in the email.
		<li>Add the FranklySDK Folder to your Xcode project 
			<br><br> <img src="../images/ios_sdk_xcode_installation_1.png" border="1"> <br><br><br>
		<li>Link the following libraries and frameworks by accessing the General tab in the Project File. Under Linked Frameworks and Libraries, add the following:
		<ul>
			<li><pre><code>libicucore.dylib</pre></code>
			<li><pre><code>CFNetwork.framework</pre></code>
			<li><pre><code>Security.framework</pre></code>
			<li><pre><code>Foundation.framework</pre></code>
			<li><pre><code>CoreData.framework</pre></code>
			<li><pre><code>SystemConfiguration.framework</pre></code>
		</ul>
		
		<br><br> <img src="../images/ios_sdk_xcode_installation_2.png" border="1"> <br><br><br>
		
		<li>Update your project’s Build Settings by accessing the Build Settings tab in the Project File. Make sure your filter is set to All. Search for Other Linker Flags and set it to “<code>-ObjC</code>”
			<br><br> <img src="../images/ios_sdk_xcode_installation_3.png" border="1"> <br><br><br>

<p>			
	Try Building your Project. If Building Succeeds, let’s move on to Initializing the SDK. If Building Fails, please check your steps and make sure you’ve completed all the steps.
</p>
</a>

<br>
<br>

<a id="initializing">
	<h2>
		Initializing the SDK
	</h2>
	
	<ol>	
		<li>In your <code>AppDelegate.m</code> file, import the <code>FranklySDK.h</code>
		<pre><code>
	#import “AppDelegate.h”
	#import “FranklySDK/headers/FranklySDK.h”			
		</code></pre>

		<li>In the <code>AppDelegate.m</code> file under the <code>application:didFinishLaunchingWithOptions</code> method, add the following:

<pre><code>
	(BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {

	// serverType is one of the FRSDKServerType enum values
	[FranklySDK initializeSDKWithServerType: serverType];

	return YES;

	}
</code></pre>

	</ol>
</a>

<br>
<br>

<a id="authenticating">
	<h2>
		Authenticating the Client
	</h2>

<p>
	Now it’s time to set up client authentication.
</p>

	<ol>	
		<li>Set the FranklySDK’s <code>authenticationDelegate</code> to an object that conforms to the <code>FranklySDKAuthenticationDelegate</code> protocol.
<p>In our example code, we’ve made our <code>ViewController</code> conform to the protocol</p>

<pre><code>
	@interface ViewController : UIViewController &lt;FranklySDKAuthenticationDelegate&gt;
</code></pre>

		<li>You set the FranklySDK authenticationDelegate and initiate authentication as follows:

<pre><code>
- (void)viewDidLoad {

	[super viewDidLoad];

	[FranklySDK sharedInstance].authenticationDelegate = self;

	[[FranklySDK sharedInstance] initiateAuthentication];

}
</code></pre>

		<li>Next you will need to set up the following:
			<ul>
				<li><code>FranklyAuthenticationDelegate</code> requires the following functions:
					<ul>
						<li><code>identifierWithNonce:completion:</code><br>

This method is where you should utilize your back end server as detailed in Frankly Server Authentication document to create a valid identifier. The user ID sent to the server is optional, however, if you choose not to include a user ID then the user will only be allowed in spectator mode.  If a user in spectator mode attempts to participate it will trigger a call to the delegate’s doUserAuthentication method at which point you should present a log in screen. When your server responds with the identifier, call completion to finish the authentication process.

						<li><strong>You must call completion or the process will never finish.</strong>
						<li>We have included a test function in <code>FranklySDK.h, retrieveIdentitifierWithUserID:Nonce:authKey:authSecret:completionBlock,</code> that will allow you to bypass your server and retrieve an identifier from Frankly’s servers.  Because it requires putting in your auth key and secret, <strong>it is only for testing.</strong>

						<ul>
							<li>Your Auth Key and Auth Secret can be found within the Admin Console under Settings
						</ul>
					</ul>
					<li><code>authenticationDidSucceedWithUserID:(NSNumber*)</code> - After this message is received, you may use the SDK.
					<li><code>authenticationDidFailWithError:(NSError*)</code> - If this message is received, you need to start authentication process over before you may use the SDK. 

<pre><code>
- (void)identifierWithNonce:(NSString *)nonce completion:(void (^)(NSString *identifier))completion {

    FranklySDK *franklySDK = [FranklySDK sharedInstance];

    // ONLY FOR TESTING - REQUEST IDENTIFIER FROM YOUR SERVER 
    [franklySDK retrieveIdentitifierWithUserID:self.userId
                                         Nonce:nonce
                                       authKey:self.authKey
                                    authSecret:self.authSecret
                               completionBlock:^(NSString *identifier, NSError *error) {
        if (identifier != nil) {
            completion(identifier);
        }
    }];
}
</code></pre>

<br>

<pre><code>
- (void)authenticationDidSucceedWithUserID:(NSNumber *)userID {

	NSLog(@"authentication did succeed");

}
</code></pre>

<br>

<pre><code>
- (void)authenticationDidFailWithError:(NSError *)error {

	NSLog(@"authentication did fail");
}
</code></pre>

<br>

</ul>

					<li>Try running the build
</ol>
</a>

<br>
<br>

<a id="setting_displayname_and_avatar">
	<h2>
		Programmatically Setting User Display Names & Profile Avatars
	</h2>

<p>

	<ol>			
			<li>Set the FranklySDK’s <code>profileDelegate</code> to an object that conforms to the <code>FranklySDKUserProfileDelegate</code> protocol.
				
				<br><br>
				
			<p>In our example code, we’ve made our <code>ViewController</code> also conform to this protocol</p>

			<pre><code>
				@interface ViewController : UIViewController &lt;FranklySDKAuthenticationDelegate, FranklySDKUserProfileDelegate&gt;
			</code></pre>

			<pre><code>
			- (void)viewDidLoad {

				[super viewDidLoad];

				[FranklySDK sharedInstance].authenticationDelegate = self;
				[FranklySDK sharedInstance].profileDelegate = self;				

				[[FranklySDK sharedInstance] initiateAuthentication];
			}
			</code></pre>
			
			The profile delegate will get called every time the user profile image or display name changes.  Also, you can enable or disable user editing of their
			profile data within the FranklySDK UI by allowing your delegate respond appropriately to the <code>-(BOOL)shouldAllowProfileEditing</code> delegate request.  
			
			<br><br>

			<li>Setting the user's display name and avatar can be done via the calls through the FranklySDK object
			
			<pre><code>

				-(void)setUserName:(NSString *)userName profileImage:(UIImage *)image];

			</code></pre>
			
			<li>When the user name and image have been updated and synced with the server the profileDelegate will get a called back that they have been changed. 
					
	</ol>

</p>
</a>

<br>
<br>

<a id="set_up_first_room_list">
	<h2>
		Setting up your First Room List
	</h2>

<p>
	Now you’re ready to set up your Rooms and Room List.
</p>

<br>

<p>
	<i>***Important Note</i> Please make sure you've set up at least one Room in the Admin Console before proceeding. If you don't have an Admin Console account, please contact us at <a href="mailto:platform-support@franklychat.com">platform-support@franklychat.com</a>.
</p>

<br>

<p>
	To use the SDK:
</p>

	<ol>
		<li>Retrieve the room list controller, <code>[FranklySDK roomListViewController]</code> and present it in your app or push it on your navigation controller.
	</ol>
</a>

<br>
<br>

<a id="log_in">
<h2>
	Allowing the User to Log In or Sign Up
</h2>
	
<p>
	If your delegate receives the <code>doUserAuthentication</code> callback then you should present a log in or sign up screen. When the user has completed logging in, you should call restart the authentication process by calling <code>initiateAuthentication</code> again. 
</p>
</a>

<br>
<br>
<br>
<br>
<br>
		
</body>
</html>
	
	